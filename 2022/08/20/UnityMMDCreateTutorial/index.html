<!DOCTYPE html>
<html lang="en">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="../images/mfmf.webp">
  
  <title>在Unity中制作MMD舞蹈视频 | uni_shiki</title>
  
  <meta name="author" content="uni_shiki" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="Unity, 文档" />
  
  <meta name="description" content="&amp;emsp;">
<meta property="og:type" content="article">
<meta property="og:title" content="在Unity中制作MMD舞蹈视频">
<meta property="og:url" content="http://example.com/2022/08/20/UnityMMDCreateTutorial/index.html">
<meta property="og:site_name" content="uni_shiki">
<meta property="og:description" content="&amp;emsp;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/images/mfmf.webp">
<meta property="article:published_time" content="2022-08-20T09:43:43.000Z">
<meta property="article:modified_time" content="2025-08-11T09:35:59.901Z">
<meta property="article:author" content="uni_shiki">
<meta property="article:tag" content="Unity">
<meta property="article:tag" content="文档">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/mfmf.webp">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" media="all"></script>
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-color-dark.min.css" media="(prefers-color-scheme: dark)"></script>
    <script src="/js/kr-dark.min.js"></script>
  
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" media="all"></script>
  
  <link rel="stylesheet" id="fontawe-css" href="/vendors/font-awesome@4.7.0/css/font-awesome.min.css" media="all"></script>
  <link rel="stylesheet" id="nprogress-css" href="/vendors/nprogress@0.2.0/nprogress.css" media="all"></script>
  
  
    <link rel="stylesheet" href="/vendors/aplayer@1.10.1/dist/APlayer.min.css"></script>
  
  
    <link rel="stylesheet" href="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"></script>
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="/vendors/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="/vendors/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
    
  </style>
  
<meta name="generator" content="Hexo 5.4.1"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                    
                                        
                                            <li><a href="/"><i class="fa fa-home"></i>首页</a></li>
                                        
                                    
                                        
                                            <li><a href="/archives/"><i class="fa fa-file"></i>档案馆</a></li>
                                        
                                    
                                        
                                            <li><a href="/friends/"><i class="fa fa-paw"></i>好伙伴</a></li>
                                        
                                    
                                        
                                            <li>
                                                <a><i class="fa fa-link"></i>链接</a>
                                                <ul class="sub-menu">
                                                    
                                                        
                                                    
                                                        
                                                            <li><a target="_blank" rel="noopener" href="https://space.bilibili.com/33554119">Bilibili</a></li>
                                                        
                                                    
                                                </ul>
                                            </li>
                                        
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">uni_shiki</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>uni_shiki</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <article itemscope itemtype="https://schema.org/Article">
    
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/20/UnityMMDCreateTutorial/">
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center" itemprop="name headline">在Unity中制作MMD舞蹈视频</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><time datetime="2022-08-20T09:43:43.000Z" itemprop="datePublished"><i class="fa fa-calendar"></i> 2022-08-20</time></li>
                <li itemprop="author" itemscope itemtype="https://schema.org/Person">
                    <i class="fa fa-user"></i> 作者 <span itemprop="name">uni_shiki</span>
                </li>
                
                    <li>
                        <i class="fa fa-edit"></i> 
                        
                        
                            ~93.72K
                        
                        字
                    </li>
                
                
            </ul>
        </header>
        <div class="kratos-post-content">
            
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                <div class="icon"><i class="fa fa-warning"></i></div>
                <div class="text"><p>本文最后编辑于 <time datetime="1754904959901"></time> 前，其中的内容可能需要更新。</p></div>
            </div>
            
            
            
                <div class="kratos-post-inner-toc toc-div-class" >
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#emsp"><span class="toc-number">1.</span> <span class="toc-text"> 
</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.1.</span> <span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86MMD%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.</span> <span class="toc-text">处理MMD文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0"><span class="toc-number">1.3.</span> <span class="toc-text">更新</span></a></li></ol></li></ol>
                </div>
            
            <hr />
            <div itemprop="articleBody"><h2 id="emsp"><a href="#emsp" class="headerlink" title="&emsp;"></a>&emsp;<br><span id="more"></span></h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ol>
<li>创建工程。这里我用的是2019.4.31f1c1版本，有较好的插件兼容性</li>
<li>导入自己的场景和人物模型</li>
<li>导入插件包：</li>
</ol>
<ul>
<li><strong>Dynamic Bone 1.2.0</strong>即动骨插件，建议使用高版本，方便后续替换成PhysBone</li>
<li><strong>VRCSDK3-AVATAR-2021.11.24.16.20_Public</strong>VRC官网下，建议使用高版本，方便后续替换成PhysBone</li>
<li><strong>VRC工具箱v1.2.5_by如梦</strong>来自B站 ，必须最后导入否则报错</li>
</ul>
<ol start="4">
<li>布置场景</li>
</ol>
<p><img src="/images/mmdTutorial/1.png"></p>
<h3 id="处理MMD文件"><a href="#处理MMD文件" class="headerlink" title="处理MMD文件"></a>处理MMD文件</h3><ol start="5">
<li>导入vmd模型动作文件</li>
<li>导入vmd镜头动作文件，并在文件名后面加上.bytes，即 xxx.vmd.bytes</li>
<li>导入音乐文件<br><img src="/images/mmdTutorial/2.png"></li>
<li>使用菜单中的VRC工具箱 —— MMD动作转换 转换获得动作（不含表情）<br><img src="/images/mmdTutorial/3.png"></li>
<li>复制一份动作出来方便修改k帧（不复制出来的是只读），取消勾选Bake Into Pose<br><img src="/images/mmdTutorial/4.png"></li>
<li>创建 Animator Controller并给角色加上，增加一个Layer用来放表情动画，并加上Mask保险<br><img src="/images/mmdTutorial/5.png"></li>
<li>导入MMD4UnityTools插件，用处是获得表情动画 下载地址：<a target="_blank" rel="noopener" href="https://github.com/ShiinaManatsu/MMD4UnityTools">https://github.com/ShiinaManatsu/MMD4UnityTools</a></li>
<li>导入完插件后修改MMDExtensionsEditor第300行附近的代码<br><img src="/images/mmdTutorial/6.png" alt="修改前"><br><img src="/images/mmdTutorial/7.png" alt="修改后"><br>其中var chara &#x3D; GameObject.Find(“Body”); 是获取表情的形态键所在的游戏物体<br>以下为我的目录结构，仅供参考<br><img src="/images/mmdTutorial/8.png"></li>
<li>修改完后就能够右键vmd文件创建表情动作了<br><img src="/images/mmdTutorial/9.png"></li>
<li>将表情动作加到Animator中，双击点开表情动作，再点击场景中的人物模型，再在左上角下拉框选择表情动作，会发现下面的Missing提示<br><img src="/images/mmdTutorial/10.png"><br>这时只需手动按形态键名字添加上再复制关键帧即可<br>只有一帧的关键帧可以先删除<br>批量添加操作为：Ctrl按住+左键加选，选完后右键Add<br>添加完后删除最后一帧，Ctrl+C复制Missing的所有帧，选中新添加的所有第一帧，Ctrl+V粘贴即可<br><img src="/images/mmdTutorial/11.png"></li>
<li>添加相机动画：只需一个脚本，视频教程：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV16r4y1n7pz">https://www.bilibili.com/video/BV16r4y1n7pz</a><br>不想看可忽略，继续看下文<br>以下为该脚本<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br></pre></td><td class="code"><pre><span class="line">using UnityEngine;</span><br><span class="line">using System.Runtime.InteropServices;</span><br><span class="line"></span><br><span class="line">public class MMD_VmdCameraLoad : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    public TextAsset Select_VMD;     //vmdファイル</span><br><span class="line">    public GameObject CameraCenter;  //カメラ中心</span><br><span class="line">    public Camera MainCamera;        //カメラ</span><br><span class="line">    public GameObject MMD_model;     //MMDモデル</span><br><span class="line"></span><br><span class="line">    private bool success = <span class="literal">false</span>;    //データの準備完了フラグ</span><br><span class="line">    CameraData[] Cam_m;</span><br><span class="line">    private int t = 0;</span><br><span class="line">    private <span class="built_in">float</span> t_f = 0.0f;</span><br><span class="line">    private Animator target_animator;</span><br><span class="line">    private <span class="built_in">float</span> nowframe = 0.0f;</span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;相机视野远近&quot;</span>)]</span><br><span class="line">    [Range(0f,120f)]</span><br><span class="line">    [SerializeField] private <span class="built_in">float</span> camFieldOfView = 60f;</span><br><span class="line">    const int HEADER = 50;            //ヘッダーの桁数</span><br><span class="line">    const int MOTIONCOUNT = 4;        //モーションレコード数</span><br><span class="line">    const int MOTIONDATA = 111;       //モーションデータ（レコード数分）</span><br><span class="line">    const int SKINCOUNT = 4;          //スキンレコード数</span><br><span class="line">    const int SKINDATA = 23;          //スキンデータ（レコード数分）</span><br><span class="line">    const int CAMERACOUNT = 4;        //カメラレコード数</span><br><span class="line">    const int CAMERADATA = 61;        //カメラデータ（レコード数分）</span><br><span class="line">    const int ILLUMINATIONCOUNT = 4;  //照明レコード数</span><br><span class="line">    const int ILLUMINATIONDATA = 28;  //照明データ（レコード数分）</span><br><span class="line">    const int SHADOWCOUNT = 4;        //シャドウレコード数</span><br><span class="line">    const int SHADOWDATA = 9;         //シャドウデータ（レコード数分）  </span><br><span class="line"></span><br><span class="line">    [StructLayout(LayoutKind.Explicit)]</span><br><span class="line">    public struct Union</span><br><span class="line">    &#123;</span><br><span class="line">        [FieldOffset(0)]</span><br><span class="line">        public <span class="built_in">float</span> float0;</span><br><span class="line"></span><br><span class="line">        [FieldOffset(0)]</span><br><span class="line">        public int int0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //カメラ情報</span><br><span class="line">    public struct CameraData</span><br><span class="line">    &#123;</span><br><span class="line">        public int frame;       //対象フレーム</span><br><span class="line">        public <span class="built_in">float</span> distans;   //距離</span><br><span class="line"></span><br><span class="line">        public <span class="built_in">float</span> Pos_x;     //カメラ中心のx座標</span><br><span class="line">        public <span class="built_in">float</span> Pos_y;     //カメラ中心のy座標</span><br><span class="line">        public <span class="built_in">float</span> Pos_z;     //カメラ中心のz座標</span><br><span class="line"></span><br><span class="line">        public <span class="built_in">float</span> Rot_x;     //カメラ中心のx軸回転</span><br><span class="line">        public <span class="built_in">float</span> Rot_y;     //カメラ中心のy軸回転</span><br><span class="line">        public <span class="built_in">float</span> Rot_z;     //カメラ中心のz軸回転</span><br><span class="line"></span><br><span class="line">        public <span class="built_in">float</span> viewAngle; //視野角</span><br><span class="line"></span><br><span class="line">        public int[] Bezier;    //ベジェ曲線の補間パラメータ</span><br><span class="line">        public bool originalframe;</span><br><span class="line">    &#125;</span><br><span class="line">    void <span class="function"><span class="title">Awake</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        target_animator = MMD_model.GetComponent&lt;Animator&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    // Use this <span class="keyword">for</span> initialization</span><br><span class="line">    void <span class="function"><span class="title">Start</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        Camera.main.transform.localPosition = new Vector3(0f, 0f, 0f);</span><br><span class="line">        Quaternion rotation = Quaternion.Euler(0f,0f,0f);</span><br><span class="line">        Camera.main.transform.localRotation = rotation;</span><br><span class="line"></span><br><span class="line">        byte[] raw_data_org = Select_VMD.bytes;</span><br><span class="line">        byte[] frameSum = new byte[4];</span><br><span class="line">        int frameSum_int = 0;</span><br><span class="line">        byte[] frame_data = new byte[4];</span><br><span class="line">        byte[] frame_data_1byte = new byte[1];</span><br><span class="line"></span><br><span class="line">        int index = HEADER + MOTIONCOUNT + SKINCOUNT; //カメラレコード数を格納している位置まで飛ばす</span><br><span class="line"></span><br><span class="line">        //レコード数の取得</span><br><span class="line">        frameSum[0] = raw_data_org[index++];</span><br><span class="line">        frameSum[1] = raw_data_org[index++];</span><br><span class="line">        frameSum[2] = raw_data_org[index++];</span><br><span class="line">        frameSum[3] = raw_data_org[index++];</span><br><span class="line">        frameSum_int = System.BitConverter.ToInt32(frameSum, 0);</span><br><span class="line">        CameraData[] Cam = new CameraData[frameSum_int]; //レコード数分要素を用意</span><br><span class="line"></span><br><span class="line">        // データ取得</span><br><span class="line">        <span class="keyword">for</span> (int i = 0; i &lt; frameSum_int; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            //フレーム</span><br><span class="line">            frame_data[0] = raw_data_org[index++];</span><br><span class="line">            frame_data[1] = raw_data_org[index++];</span><br><span class="line">            frame_data[2] = raw_data_org[index++];</span><br><span class="line">            frame_data[3] = raw_data_org[index++];</span><br><span class="line">            Cam[i].frame = System.BitConverter.ToInt32(frame_data, 0);</span><br><span class="line">            //距離</span><br><span class="line">            Cam[i].distans = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            //位置</span><br><span class="line">            Cam[i].Pos_x = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            Cam[i].Pos_y = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            Cam[i].Pos_z = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            Cam[i].Rot_x = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            //角度(ラジアンから変換)</span><br><span class="line">            conversionAngle(ref Cam[i].Rot_x);</span><br><span class="line">            Cam[i].Rot_y = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            conversionAngle(ref Cam[i].Rot_y);</span><br><span class="line">            Cam[i].Rot_z = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            conversionAngle(ref Cam[i].Rot_z);</span><br><span class="line">            //ベジェ曲線</span><br><span class="line">            Cam[i].Bezier = new int[24];</span><br><span class="line">            <span class="keyword">for</span> (int j = 0; j &lt; 24; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                frame_data_1byte[0] = raw_data_org[index++];</span><br><span class="line">                Cam[i].Bezier[j] = System.Convert.ToInt32(System.BitConverter.ToString(frame_data_1byte, 0), 16);</span><br><span class="line">            &#125;</span><br><span class="line">            //視野角</span><br><span class="line">            frame_data[0] = raw_data_org[index++];</span><br><span class="line">            frame_data[1] = raw_data_org[index++];</span><br><span class="line">            frame_data[2] = raw_data_org[index++];</span><br><span class="line">            frame_data[3] = raw_data_org[index++];</span><br><span class="line">            Cam[i].viewAngle = System.BitConverter.ToInt32(frame_data, 0);</span><br><span class="line">            index += 1;  //パース分１バイト飛ばす</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //並び順バラバラなのでソート</span><br><span class="line">        Qsort(ref Cam, 0, Cam.Length - 1);</span><br><span class="line">        //以降補間処理</span><br><span class="line">        Cam_m = new CameraData[Cam[frameSum_int - 1].frame + 1]; //最終フレーム分用意</span><br><span class="line"></span><br><span class="line">        //３次ベジェ曲線補間</span><br><span class="line">        Cam_m[0] = Cam[0];//１レコード目をコピー</span><br><span class="line">        Cam_m[0].originalframe = <span class="literal">true</span>;</span><br><span class="line">        int Addframe = 0;</span><br><span class="line">        int wIndex = 1;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (int i = 0; i &lt; frameSum_int - 1; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Addframe = Cam[i + 1].frame - Cam[i].frame;</span><br><span class="line">            <span class="keyword">for</span> (int j = 1; j &lt; Addframe; j++)</span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                Cam_m[wIndex].frame = wIndex;</span><br><span class="line">                Cam_m[wIndex].Pos_x = Cam[i].Pos_x + (Cam[i + 1].Pos_x - Cam[i].Pos_x) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[0], Cam[i + 1].Bezier[2]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[1], Cam[i + 1].Bezier[3]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Pos_y = Cam[i].Pos_y + (Cam[i + 1].Pos_y - Cam[i].Pos_y) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[4], Cam[i + 1].Bezier[6]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[5], Cam[i + 1].Bezier[7]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Pos_z = Cam[i].Pos_z + (Cam[i + 1].Pos_z - Cam[i].Pos_z) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[8], Cam[i + 1].Bezier[10]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[9], Cam[i + 1].Bezier[11]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Rot_x = Cam[i].Rot_x + (Cam[i + 1].Rot_x - Cam[i].Rot_x) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[12], Cam[i + 1].Bezier[14]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[13], Cam[i + 1].Bezier[15]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Rot_y = Cam[i].Rot_y + (Cam[i + 1].Rot_y - Cam[i].Rot_y) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[12], Cam[i + 1].Bezier[14]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[13], Cam[i + 1].Bezier[15]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Rot_z = Cam[i].Rot_z + (Cam[i + 1].Rot_z - Cam[i].Rot_z) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[12], Cam[i + 1].Bezier[14]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[13], Cam[i + 1].Bezier[15]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].distans = Cam[i].distans + (Cam[i + 1].distans - Cam[i].distans) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[16], Cam[i + 1].Bezier[18]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[17], Cam[i + 1].Bezier[19]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].viewAngle = Cam[i].viewAngle + (Cam[i + 1].viewAngle - Cam[i].viewAngle) *</span><br><span class="line">                                      (int)(BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[20], Cam[i + 1].Bezier[22]),</span><br><span class="line">                                                        new Vector2(Cam[i + 1].Bezier[21], Cam[i + 1].Bezier[23]), new Vector2(127, 127),</span><br><span class="line">                                                        (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                wIndex++;</span><br><span class="line">            &#125;</span><br><span class="line">            Cam_m[wIndex] = Cam[i + 1];</span><br><span class="line">            Cam_m[wIndex++].originalframe = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        success = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void <span class="function"><span class="title">Update</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        //カメラ情報が完成したらカメラスタート</span><br><span class="line">        <span class="keyword">if</span> (success)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (t != (int)nowframe)</span><br><span class="line">            &#123;</span><br><span class="line">                //新しいフレームの処理</span><br><span class="line">                t = (int)nowframe;</span><br><span class="line">                //最終フレームを超えないようにする処理</span><br><span class="line">                <span class="keyword">if</span> (t &lt; Cam_m.Length - 1)</span><br><span class="line">                &#123;</span><br><span class="line">                    CameraCenter.transform.localPosition = new Vector3(Cam_m[t].Pos_x / 12.5f + MMD_model.transform.localPosition.x,</span><br><span class="line">                                                                       Cam_m[t].Pos_y / 12.5f + MMD_model.transform.localPosition.y,</span><br><span class="line">                                                                       Cam_m[t].Pos_z / 12.5f + MMD_model.transform.localPosition.z);</span><br><span class="line">                    this.transform.localPosition = new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / 12.5f);</span><br><span class="line">                    CameraCenter.transform.rotation = Quaternion.Euler(-Cam_m[t].Rot_x, -Cam_m[t].Rot_y, -Cam_m[t].Rot_z);</span><br><span class="line">                    MainCamera.fieldOfView = camFieldOfView;//Cam_m[t].viewAngle; sxqn&amp;lianai:60 SingMe:18 </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                //同じフレームが再度処理された場合の処理</span><br><span class="line">                <span class="keyword">if</span> (t + 1 &lt; Cam_m.Length - 1 &amp;&amp; !Cam_m[t + 1].originalframe)</span><br><span class="line">                &#123;</span><br><span class="line">                    t_f = nowframe - (int)nowframe;</span><br><span class="line">                    CameraCenter.transform.localPosition = new Vector3(((Cam_m[t + <span class="number">1</span>].Pos_x - Cam_m[t].Pos_x) * t_f + Cam_m[t].Pos_x) / <span class="number">12.5</span>f + MMD_model.transform.localPosition.x,</span><br><span class="line">                                                                       ((Cam_m[t + <span class="number">1</span>].Pos_y - Cam_m[t].Pos_y) * t_f + Cam_m[t].Pos_y) / <span class="number">12.5</span>f + MMD_model.transform.localPosition.y,</span><br><span class="line">                                                                       ((Cam_m[t + <span class="number">1</span>].Pos_z - Cam_m[t].Pos_z) * t_f + Cam_m[t].Pos_z) / <span class="number">12.5</span>f + MMD_model.transform.localPosition.z);</span><br><span class="line">                    this.transform.localPosition = new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / <span class="number">12.5</span>f);</span><br><span class="line">                    CameraCenter.transform.rotation = Quaternion.Euler((-Cam_m[t + <span class="number">1</span>].Rot_x - -Cam_m[t].Rot_x) * t_f + -Cam_m[t].Rot_x,</span><br><span class="line">                                                                        (-Cam_m[t + <span class="number">1</span>].Rot_y - -Cam_m[t].Rot_y) * t_f + -Cam_m[t].Rot_y,</span><br><span class="line">                                                                        (-Cam_m[t + <span class="number">1</span>].Rot_z - -Cam_m[t].Rot_z) * t_f + -Cam_m[t].Rot_z);</span><br><span class="line">                    MainCamera.fieldOfView = camFieldOfView;// (Cam_m[t + <span class="number">1</span>].viewAngle - Cam_m[t].viewAngle) * t_f + Cam_m[t].viewAngle;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        nowframe = getAnimationFrame();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private float getAnimationFrame()</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        float returnValue = <span class="number">0.0</span>f;</span><br><span class="line"></span><br><span class="line">        var clipInfoList = target_animator.GetCurrentAnimatorClipInfo(<span class="number">0</span>);</span><br><span class="line">        if (clipInfoList != null)</span><br><span class="line">        &#123;</span><br><span class="line">            var clip = clipInfoList[<span class="number">0</span>].clip;</span><br><span class="line">            var stateInfo = target_animator.GetCurrentAnimatorStateInfo(<span class="number">0</span>);</span><br><span class="line">            returnValue = clip.length * stateInfo.normalizedTime * clip.frameRate;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return returnValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    float getVmdCamera(ref int index, byte[] data)</span><br><span class="line">    &#123;</span><br><span class="line">        Union union = new Union();</span><br><span class="line">        byte[] raw_data = new byte[<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">        raw_data[<span class="number">0</span>] = data[index++];</span><br><span class="line">        raw_data[<span class="number">1</span>] = data[index++];</span><br><span class="line">        raw_data[<span class="number">2</span>] = data[index++];</span><br><span class="line">        raw_data[<span class="number">3</span>] = data[index++];</span><br><span class="line">        union.int0 = System.BitConverter.ToInt32(raw_data, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        return (union.float0);</span><br><span class="line">    &#125;</span><br><span class="line">    // ラジアンから角度を取得</span><br><span class="line">    void conversionAngle(ref float rot)</span><br><span class="line">    &#123;</span><br><span class="line">        rot = (float)(rot * <span class="number">180</span> / System.Math.PI);</span><br><span class="line">    &#125;</span><br><span class="line">    //クイックソート</span><br><span class="line">    void Qsort(ref CameraData[] data, int left, int right)</span><br><span class="line">    &#123;</span><br><span class="line">        int i, j;</span><br><span class="line">        int pivot;</span><br><span class="line">        CameraData tmp;</span><br><span class="line"></span><br><span class="line">        i = left; j = right;</span><br><span class="line">        pivot = data[(left + right) / <span class="number">2</span>].frame;</span><br><span class="line">        do</span><br><span class="line">        &#123;</span><br><span class="line">            while ((i &lt; right) &amp;&amp; (data[i].frame &lt; pivot)) i++;</span><br><span class="line">            <span class="keyword">while</span> ((j &gt; left) &amp;&amp; (pivot &lt; data[j].frame)) j--;</span><br><span class="line">            <span class="keyword">if</span> (i &lt;= j)</span><br><span class="line">            &#123;</span><br><span class="line">                tmp = data[i];</span><br><span class="line">                data[i] = data[j];</span><br><span class="line">                data[j] = tmp;</span><br><span class="line">                i++; j--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (i &lt;= j);</span><br><span class="line">        <span class="keyword">if</span> (left &lt; j) Qsort(ref data, left, j);</span><br><span class="line">        <span class="keyword">if</span> (i &lt; right) Qsort(ref data, i, right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //以降ベジェ曲線に関する関数</span><br><span class="line">    <span class="built_in">float</span> BezierCurveX(<span class="built_in">float</span> x1, <span class="built_in">float</span> x2, <span class="built_in">float</span> x3, <span class="built_in">float</span> x4, <span class="built_in">float</span> t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> Mathf.Pow(1 - t, 3) * x1 + 3 * Mathf.Pow(1 - t, 2) * t * x2 + 3 * (1 - t) * Mathf.Pow(t, 2) * x3 + Mathf.Pow(t, 3) * x4;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">float</span> BezierCurveY(<span class="built_in">float</span> y1, <span class="built_in">float</span> y2, <span class="built_in">float</span> y3, <span class="built_in">float</span> y4, <span class="built_in">float</span> t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> Mathf.Pow(1 - t, 3) * y1 + 3 * Mathf.Pow(1 - t, 2) * t * y2 + 3 * (1 - t) * Mathf.Pow(t, 2) * y3 + Mathf.Pow(t, 3) * y4;</span><br><span class="line">    &#125;</span><br><span class="line">    Vector2 BezierCurve(Vector2 p1, Vector2 p2, Vector2 p3, Vector2 p4, <span class="built_in">float</span> t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> new Vector2(</span><br><span class="line">            BezierCurveX(p1.x, p2.x, p3.x, p4.x, t),</span><br><span class="line">            BezierCurveY(p1.y, p2.y, p3.y, p4.y, t));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
说明：其中有部分内容是经过我修改过的，在此指出：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//Start()中的这三行</span><br><span class="line">Camera.main.transform.localPosition = new Vector3(0f, 0f, 0f);</span><br><span class="line">Quaternion rotation = Quaternion.Euler(0f,0f,0f);</span><br><span class="line">Camera.main.transform.localRotation = rotation;</span><br><span class="line">//以及</span><br><span class="line">[Header(<span class="string">&quot;相机视野远近&quot;</span>)]</span><br><span class="line">[Range(0f,120f)]</span><br><span class="line">[SerializeField] private <span class="built_in">float</span> camFieldOfView = 60f;</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">MainCamera.fieldOfView = camFieldOfView;//Cam_m[t].viewAngle; sxqn&amp;lianai:60 SingMe:18 </span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">MainCamera.fieldOfView = camFieldOfView;// (Cam_m[t + 1].viewAngle - Cam_m[t].viewAngle) * t_f + Cam_m[t].viewAngle;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>将该脚本添加到下图所示物体上，并按对应的命名来设置<strong>相机</strong>的目录结构，VMDCAM为空节点，Camera为正常的主相机<br>并为脚本附上对应的物体：.bytes文件、节点、相机、人物模型<br><img src="/images/mmdTutorial/12.png"><br>16. 最后为相机加上Audio Source组件加上音乐就完成啦<br><img src="/images/mmdTutorial/13.png"><br>17. 最后的最后推荐一个AssetStore的资源，叫做Unity Recorder，它能在运行游戏时帮你录制Game窗口的画面，并能直接录制4K画质，使用方便<br>教程：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Lt411H7bp">https://www.bilibili.com/video/BV1Lt411H7bp</a></p>
<hr>
<p><strong>注</strong>：</p>
<ol>
<li>PhysBone比Dynamic Bone的物理性能高10倍；</li>
<li>最终若想发布则不能使用PhysBone因为需配合VRCSDK一起使用，而VRCSDK无法导出；</li>
<li>可以移除VRCSDK后再导出，当然也只能使用Dynamic Bone了。</li>
</ol>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><hr>
<p>2023&#x2F;11&#x2F;21更新</p>
<hr>
<p>更新相机脚本，使相机不会离模型过远，完整脚本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br></pre></td><td class="code"><pre><span class="line">using UnityEngine;</span><br><span class="line">using System.Runtime.InteropServices;</span><br><span class="line"></span><br><span class="line">public class MMD_VmdCameraLoad : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    public TextAsset Select_VMD;     //vmdファイル</span><br><span class="line">    [SerializeField] private GameObject CameraCenter;  //カメラ中心</span><br><span class="line">    [SerializeField] private Camera MainCamera;        //カメラ</span><br><span class="line">    [SerializeField] public GameObject MMD_model;     //MMDモデル</span><br><span class="line"></span><br><span class="line">    private bool success = <span class="literal">false</span>;    //データの準備完了フラグ</span><br><span class="line">    CameraData[] Cam_m;</span><br><span class="line">    private int t = 0;</span><br><span class="line">    private <span class="built_in">float</span> t_f = 0.0f;</span><br><span class="line">    private Animator target_animator;</span><br><span class="line">    private <span class="built_in">float</span> nowframe = 0.0f;</span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;相机视野远近&quot;</span>)]</span><br><span class="line">    [Range(0f,120f)]</span><br><span class="line">    [SerializeField] public <span class="built_in">float</span> camFieldOfView = 60f;</span><br><span class="line">    const int HEADER = 50;            //ヘッダーの桁数</span><br><span class="line">    const int MOTIONCOUNT = 4;        //モーションレコード数</span><br><span class="line">    const int MOTIONDATA = 111;       //モーションデータ（レコード数分）</span><br><span class="line">    const int SKINCOUNT = 4;          //スキンレコード数</span><br><span class="line">    const int SKINDATA = 23;          //スキンデータ（レコード数分）</span><br><span class="line">    const int CAMERACOUNT = 4;        //カメラレコード数</span><br><span class="line">    const int CAMERADATA = 61;        //カメラデータ（レコード数分）</span><br><span class="line">    const int ILLUMINATIONCOUNT = 4;  //照明レコード数</span><br><span class="line">    const int ILLUMINATIONDATA = 28;  //照明データ（レコード数分）</span><br><span class="line">    const int SHADOWCOUNT = 4;        //シャドウレコード数</span><br><span class="line">    const int SHADOWDATA = 9;         //シャドウデータ（レコード数分）  </span><br><span class="line"></span><br><span class="line">    [StructLayout(LayoutKind.Explicit)]</span><br><span class="line">    public struct Union</span><br><span class="line">    &#123;</span><br><span class="line">        [FieldOffset(0)]</span><br><span class="line">        public <span class="built_in">float</span> float0;</span><br><span class="line"></span><br><span class="line">        [FieldOffset(0)]</span><br><span class="line">        public int int0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //カメラ情報</span><br><span class="line">    public struct CameraData</span><br><span class="line">    &#123;</span><br><span class="line">        public int frame;       //対象フレーム</span><br><span class="line">        public <span class="built_in">float</span> distans;   //距離</span><br><span class="line"></span><br><span class="line">        public <span class="built_in">float</span> Pos_x;     //カメラ中心のx座標</span><br><span class="line">        public <span class="built_in">float</span> Pos_y;     //カメラ中心のy座標</span><br><span class="line">        public <span class="built_in">float</span> Pos_z;     //カメラ中心のz座標</span><br><span class="line"></span><br><span class="line">        public <span class="built_in">float</span> Rot_x;     //カメラ中心のx軸回転</span><br><span class="line">        public <span class="built_in">float</span> Rot_y;     //カメラ中心のy軸回転</span><br><span class="line">        public <span class="built_in">float</span> Rot_z;     //カメラ中心のz軸回転</span><br><span class="line"></span><br><span class="line">        public <span class="built_in">float</span> viewAngle; //視野角</span><br><span class="line"></span><br><span class="line">        public int[] Bezier;    //ベジェ曲線の補間パラメータ</span><br><span class="line">        public bool originalframe;</span><br><span class="line">    &#125;</span><br><span class="line">    void <span class="function"><span class="title">Awake</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        target_animator = MMD_model.GetComponent&lt;Animator&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    // Use this <span class="keyword">for</span> initialization</span><br><span class="line">    public void <span class="function"><span class="title">Start</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        Camera.main.transform.localPosition = new Vector3(0f, 0f, 0f);</span><br><span class="line">        Quaternion rotation = Quaternion.Euler(0f,0f,0f);</span><br><span class="line">        Camera.main.transform.localRotation = rotation;</span><br><span class="line"></span><br><span class="line">        byte[] raw_data_org = Select_VMD.bytes;</span><br><span class="line">        byte[] frameSum = new byte[4];</span><br><span class="line">        int frameSum_int = 0;</span><br><span class="line">        byte[] frame_data = new byte[4];</span><br><span class="line">        byte[] frame_data_1byte = new byte[1];</span><br><span class="line"></span><br><span class="line">        int index = HEADER + MOTIONCOUNT + SKINCOUNT; //カメラレコード数を格納している位置まで飛ばす</span><br><span class="line"></span><br><span class="line">        //レコード数の取得</span><br><span class="line">        frameSum[0] = raw_data_org[index++];</span><br><span class="line">        frameSum[1] = raw_data_org[index++];</span><br><span class="line">        frameSum[2] = raw_data_org[index++];</span><br><span class="line">        frameSum[3] = raw_data_org[index++];</span><br><span class="line">        frameSum_int = System.BitConverter.ToInt32(frameSum, 0);</span><br><span class="line">        CameraData[] Cam = new CameraData[frameSum_int]; //レコード数分要素を用意</span><br><span class="line"></span><br><span class="line">        // データ取得</span><br><span class="line">        <span class="keyword">for</span> (int i = 0; i &lt; frameSum_int; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            //フレーム</span><br><span class="line">            frame_data[0] = raw_data_org[index++];</span><br><span class="line">            frame_data[1] = raw_data_org[index++];</span><br><span class="line">            frame_data[2] = raw_data_org[index++];</span><br><span class="line">            frame_data[3] = raw_data_org[index++];</span><br><span class="line">            Cam[i].frame = System.BitConverter.ToInt32(frame_data, 0);</span><br><span class="line">            //距離</span><br><span class="line">            Cam[i].distans = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            //位置</span><br><span class="line">            Cam[i].Pos_x = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            Cam[i].Pos_y = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            Cam[i].Pos_z = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            Cam[i].Rot_x = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            //角度(ラジアンから変換)</span><br><span class="line">            conversionAngle(ref Cam[i].Rot_x);</span><br><span class="line">            Cam[i].Rot_y = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            conversionAngle(ref Cam[i].Rot_y);</span><br><span class="line">            Cam[i].Rot_z = getVmdCamera(ref index, raw_data_org);</span><br><span class="line">            conversionAngle(ref Cam[i].Rot_z);</span><br><span class="line">            //ベジェ曲線</span><br><span class="line">            Cam[i].Bezier = new int[24];</span><br><span class="line">            <span class="keyword">for</span> (int j = 0; j &lt; 24; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                frame_data_1byte[0] = raw_data_org[index++];</span><br><span class="line">                Cam[i].Bezier[j] = System.Convert.ToInt32(System.BitConverter.ToString(frame_data_1byte, 0), 16);</span><br><span class="line">            &#125;</span><br><span class="line">            //視野角</span><br><span class="line">            frame_data[0] = raw_data_org[index++];</span><br><span class="line">            frame_data[1] = raw_data_org[index++];</span><br><span class="line">            frame_data[2] = raw_data_org[index++];</span><br><span class="line">            frame_data[3] = raw_data_org[index++];</span><br><span class="line">            Cam[i].viewAngle = System.BitConverter.ToInt32(frame_data, 0);</span><br><span class="line">            index += 1;  //パース分１バイト飛ばす</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //並び順バラバラなのでソート</span><br><span class="line">        Qsort(ref Cam, 0, Cam.Length - 1);</span><br><span class="line">        //以降補間処理</span><br><span class="line">        Cam_m = new CameraData[Cam[frameSum_int - 1].frame + 1]; //最終フレーム分用意</span><br><span class="line"></span><br><span class="line">        //３次ベジェ曲線補間</span><br><span class="line">        Cam_m[0] = Cam[0];//１レコード目をコピー</span><br><span class="line">        Cam_m[0].originalframe = <span class="literal">true</span>;</span><br><span class="line">        int Addframe = 0;</span><br><span class="line">        int wIndex = 1;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (int i = 0; i &lt; frameSum_int - 1; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Addframe = Cam[i + 1].frame - Cam[i].frame;</span><br><span class="line">            <span class="keyword">for</span> (int j = 1; j &lt; Addframe; j++)</span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                Cam_m[wIndex].frame = wIndex;</span><br><span class="line">                Cam_m[wIndex].Pos_x = Cam[i].Pos_x + (Cam[i + 1].Pos_x - Cam[i].Pos_x) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[0], Cam[i + 1].Bezier[2]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[1], Cam[i + 1].Bezier[3]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Pos_y = Cam[i].Pos_y + (Cam[i + 1].Pos_y - Cam[i].Pos_y) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[4], Cam[i + 1].Bezier[6]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[5], Cam[i + 1].Bezier[7]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Pos_z = Cam[i].Pos_z + (Cam[i + 1].Pos_z - Cam[i].Pos_z) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[8], Cam[i + 1].Bezier[10]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[9], Cam[i + 1].Bezier[11]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Rot_x = Cam[i].Rot_x + (Cam[i + 1].Rot_x - Cam[i].Rot_x) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[12], Cam[i + 1].Bezier[14]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[13], Cam[i + 1].Bezier[15]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Rot_y = Cam[i].Rot_y + (Cam[i + 1].Rot_y - Cam[i].Rot_y) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[12], Cam[i + 1].Bezier[14]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[13], Cam[i + 1].Bezier[15]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].Rot_z = Cam[i].Rot_z + (Cam[i + 1].Rot_z - Cam[i].Rot_z) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[12], Cam[i + 1].Bezier[14]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[13], Cam[i + 1].Bezier[15]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].distans = Cam[i].distans + (Cam[i + 1].distans - Cam[i].distans) *</span><br><span class="line">                                      (BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[16], Cam[i + 1].Bezier[18]),</span><br><span class="line">                                                   new Vector2(Cam[i + 1].Bezier[17], Cam[i + 1].Bezier[19]), new Vector2(127, 127),</span><br><span class="line">                                                   (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                Cam_m[wIndex].viewAngle = Cam[i].viewAngle + (Cam[i + 1].viewAngle - Cam[i].viewAngle) *</span><br><span class="line">                                      (int)(BezierCurve(new Vector2(0, 0), new Vector2(Cam[i + 1].Bezier[20], Cam[i + 1].Bezier[22]),</span><br><span class="line">                                                        new Vector2(Cam[i + 1].Bezier[21], Cam[i + 1].Bezier[23]), new Vector2(127, 127),</span><br><span class="line">                                                        (<span class="built_in">float</span>)(1.0 * j / (Addframe))).y) / 127;</span><br><span class="line">                wIndex++;</span><br><span class="line">            &#125;</span><br><span class="line">            Cam_m[wIndex] = Cam[i + 1];</span><br><span class="line">            Cam_m[wIndex++].originalframe = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        success = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void <span class="function"><span class="title">Update</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        //if (Vector3.Distance(MMD_model.transform.position, MainCamera.transform.position) &gt; 6.5f)</span><br><span class="line">        //&#123;</span><br><span class="line">        //    MainCamera.transform.position = Vector3.MoveTowards(MainCamera.transform.position, MainCamera.transform.position + MainCamera.transform.forward *.5f , 10f);</span><br><span class="line">        //    //MainCamera.transform.LookAt(MMD_model.transform);</span><br><span class="line">        //    Debug.Log(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        //&#125;</span><br><span class="line">        //else</span><br><span class="line">        //&#123;</span><br><span class="line">        //    Camera.main.transform.localPosition = new Vector3(.05f, -.4f, .58f);</span><br><span class="line">        //&#125;</span><br><span class="line">        //カメラ情報が完成したらカメラスタート</span><br><span class="line">        <span class="keyword">if</span> (success)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (t != (int)nowframe)</span><br><span class="line">            &#123;</span><br><span class="line">                //新しいフレームの処理</span><br><span class="line">                t = (int)nowframe;</span><br><span class="line">                //最終フレームを超えないようにする処理</span><br><span class="line">                <span class="keyword">if</span> (t &lt; Cam_m.Length - 1)</span><br><span class="line">                &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    CameraCenter.transform.localPosition = new Vector3(Cam_m[t].Pos_x / 12.5f + MMD_model.transform.localPosition.x,</span><br><span class="line">                                                                  Cam_m[t].Pos_y / 12.5f + MMD_model.transform.localPosition.y,</span><br><span class="line">                                                                  Cam_m[t].Pos_z / 12.5f + MMD_model.transform.localPosition.z);</span><br><span class="line"></span><br><span class="line">                    //if (Vector3.Distance(MMD_model.transform.position, MainCamera.transform.position) &lt; 6.5f)</span><br><span class="line">                    //    this.transform.localPosition = new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / 12.5f);</span><br><span class="line">                    //else</span><br><span class="line">                    //    this.transform.localPosition = new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / 16f);</span><br><span class="line">                    this.transform.localPosition = (Vector3.Distance(MMD_model.transform.position, new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / 12.5f)) &lt; 6f) ? new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / 12.5f) : new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / 24f);</span><br><span class="line">                    CameraCenter.transform.rotation = Quaternion.Euler(-Cam_m[t].Rot_x, -Cam_m[t].Rot_y, -Cam_m[t].Rot_z);</span><br><span class="line">                    MainCamera.fieldOfView = camFieldOfView;//Cam_m[t].viewAngle; sxqn&amp;lianai:60 SingMe:18 </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                //同じフレームが再度処理された場合の処理</span><br><span class="line">                <span class="keyword">if</span> (t + 1 &lt; Cam_m.Length - 1 &amp;&amp; !Cam_m[t + 1].originalframe)</span><br><span class="line">                &#123;</span><br><span class="line">                    t_f = nowframe - (int)nowframe;</span><br><span class="line">                    </span><br><span class="line"></span><br><span class="line">                    CameraCenter.transform.localPosition = new Vector3(((Cam_m[t + <span class="number">1</span>].Pos_x - Cam_m[t].Pos_x) * t_f + Cam_m[t].Pos_x) / <span class="number">12.5</span>f + MMD_model.transform.localPosition.x,</span><br><span class="line">                                                                    ((Cam_m[t + <span class="number">1</span>].Pos_y - Cam_m[t].Pos_y) * t_f + Cam_m[t].Pos_y) / <span class="number">12.5</span>f + MMD_model.transform.localPosition.y,</span><br><span class="line">                                                                    ((Cam_m[t + <span class="number">1</span>].Pos_z - Cam_m[t].Pos_z) * t_f + Cam_m[t].Pos_z) / <span class="number">12.5</span>f + MMD_model.transform.localPosition.z);</span><br><span class="line">                    //if (Vector3.Distance(MMD_model.transform.position, MainCamera.transform.position) &lt; <span class="number">6.5</span>f)</span><br><span class="line">                    //    this.transform.localPosition = new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / <span class="number">12.5</span>f);</span><br><span class="line">                    //else</span><br><span class="line">                    //    this.transform.localPosition = new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / <span class="number">16</span>f);</span><br><span class="line"></span><br><span class="line">                    this.transform.localPosition = (Vector3.Distance(MMD_model.transform.position, new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / <span class="number">12.5</span>f)) &lt; 6f) ? new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / 12.5f) : new Vector3(this.transform.localPosition.x, this.transform.localPosition.y, Cam_m[t].distans / 24f);</span><br><span class="line"></span><br><span class="line">                    CameraCenter.transform.rotation = Quaternion.Euler((-Cam_m[t + <span class="number">1</span>].Rot_x - -Cam_m[t].Rot_x) * t_f + -Cam_m[t].Rot_x,</span><br><span class="line">                                                                        (-Cam_m[t + <span class="number">1</span>].Rot_y - -Cam_m[t].Rot_y) * t_f + -Cam_m[t].Rot_y,</span><br><span class="line">                                                                        (-Cam_m[t + <span class="number">1</span>].Rot_z - -Cam_m[t].Rot_z) * t_f + -Cam_m[t].Rot_z);</span><br><span class="line">                    </span><br><span class="line">                    MainCamera.fieldOfView = camFieldOfView;// (Cam_m[t + <span class="number">1</span>].viewAngle - Cam_m[t].viewAngle) * t_f + Cam_m[t].viewAngle;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        nowframe = getAnimationFrame();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void FixedUpdate()</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    private float getAnimationFrame()</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        float returnValue = <span class="number">0.0</span>f;</span><br><span class="line"></span><br><span class="line">        var clipInfoList = target_animator.GetCurrentAnimatorClipInfo(<span class="number">0</span>);</span><br><span class="line">        if (clipInfoList != null)</span><br><span class="line">        &#123;</span><br><span class="line">            var clip = clipInfoList[<span class="number">0</span>].clip;</span><br><span class="line">            var stateInfo = target_animator.GetCurrentAnimatorStateInfo(<span class="number">0</span>);</span><br><span class="line">            returnValue = clip.length * stateInfo.normalizedTime * clip.frameRate;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return returnValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    float getVmdCamera(ref int index, byte[] data)</span><br><span class="line">    &#123;</span><br><span class="line">        Union union = new Union();</span><br><span class="line">        byte[] raw_data = new byte[<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">        raw_data[<span class="number">0</span>] = data[index++];</span><br><span class="line">        raw_data[<span class="number">1</span>] = data[index++];</span><br><span class="line">        raw_data[<span class="number">2</span>] = data[index++];</span><br><span class="line">        raw_data[<span class="number">3</span>] = data[index++];</span><br><span class="line">        union.int0 = System.BitConverter.ToInt32(raw_data, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        return (union.float0);</span><br><span class="line">    &#125;</span><br><span class="line">    // ラジアンから角度を取得</span><br><span class="line">    void conversionAngle(ref float rot)</span><br><span class="line">    &#123;</span><br><span class="line">        rot = (float)(rot * <span class="number">180</span> / System.Math.PI);</span><br><span class="line">    &#125;</span><br><span class="line">    //クイックソート</span><br><span class="line">    void Qsort(ref CameraData[] data, int left, int right)</span><br><span class="line">    &#123;</span><br><span class="line">        int i, j;</span><br><span class="line">        int pivot;</span><br><span class="line">        CameraData tmp;</span><br><span class="line"></span><br><span class="line">        i = left; j = right;</span><br><span class="line">        pivot = data[(left + right) / <span class="number">2</span>].frame;</span><br><span class="line">        do</span><br><span class="line">        &#123;</span><br><span class="line">            while ((i &lt; right) &amp;&amp; (data[i].frame &lt; pivot)) i++;</span><br><span class="line">            <span class="keyword">while</span> ((j &gt; left) &amp;&amp; (pivot &lt; data[j].frame)) j--;</span><br><span class="line">            <span class="keyword">if</span> (i &lt;= j)</span><br><span class="line">            &#123;</span><br><span class="line">                tmp = data[i];</span><br><span class="line">                data[i] = data[j];</span><br><span class="line">                data[j] = tmp;</span><br><span class="line">                i++; j--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (i &lt;= j);</span><br><span class="line">        <span class="keyword">if</span> (left &lt; j) Qsort(ref data, left, j);</span><br><span class="line">        <span class="keyword">if</span> (i &lt; right) Qsort(ref data, i, right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //以降ベジェ曲線に関する関数</span><br><span class="line">    <span class="built_in">float</span> BezierCurveX(<span class="built_in">float</span> x1, <span class="built_in">float</span> x2, <span class="built_in">float</span> x3, <span class="built_in">float</span> x4, <span class="built_in">float</span> t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> Mathf.Pow(1 - t, 3) * x1 + 3 * Mathf.Pow(1 - t, 2) * t * x2 + 3 * (1 - t) * Mathf.Pow(t, 2) * x3 + Mathf.Pow(t, 3) * x4;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">float</span> BezierCurveY(<span class="built_in">float</span> y1, <span class="built_in">float</span> y2, <span class="built_in">float</span> y3, <span class="built_in">float</span> y4, <span class="built_in">float</span> t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> Mathf.Pow(1 - t, 3) * y1 + 3 * Mathf.Pow(1 - t, 2) * t * y2 + 3 * (1 - t) * Mathf.Pow(t, 2) * y3 + Mathf.Pow(t, 3) * y4;</span><br><span class="line">    &#125;</span><br><span class="line">    Vector2 BezierCurve(Vector2 p1, Vector2 p2, Vector2 p3, Vector2 p4, <span class="built_in">float</span> t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> new Vector2(</span><br><span class="line">            BezierCurveX(p1.x, p2.x, p3.x, p4.x, t),</span><br><span class="line">            BezierCurveY(p1.y, p2.y, p3.y, p4.y, t));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li>附加记录一个类似Scene窗口的相机控制脚本：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line">public class CameraController : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [Tooltip(<span class="string">&quot;code auto get&quot;</span>)]</span><br><span class="line">    [SerializeField]</span><br><span class="line">    private Camera mainCamera;</span><br><span class="line">    private Transform cameraTrans;</span><br><span class="line">    [SerializeField] private Slider CamDisSlider;</span><br><span class="line"></span><br><span class="line">    private int xAxisCoefficient = 1;</span><br><span class="line">    private int yAsixCoefficient = 1;</span><br><span class="line"></span><br><span class="line">    private string _mouseXString = <span class="string">&quot;Mouse X&quot;</span>;</span><br><span class="line">    private string _mouseYString = <span class="string">&quot;Mouse Y&quot;</span>;</span><br><span class="line">    private string _mouseScrollWheel = <span class="string">&quot;Mouse ScrollWheel&quot;</span>;</span><br><span class="line">    private Vector3 _currentMouseRotate = Vector3.zero;</span><br><span class="line"></span><br><span class="line">    public <span class="built_in">float</span> fieldOfViewMin = 20.0f;</span><br><span class="line">    public <span class="built_in">float</span> fieldOfviewMax = 100.0f;</span><br><span class="line">    public <span class="built_in">float</span> moveSpeed = 3;</span><br><span class="line">    public <span class="built_in">float</span> sensitivityDrag = 1;</span><br><span class="line">    public <span class="built_in">float</span> sensitivityRotate = 3;</span><br><span class="line">    public <span class="built_in">float</span> sensitivetyMouseWheel = 30;</span><br><span class="line"></span><br><span class="line">    [SerializeField] <span class="built_in">float</span> moveSpeedWhenStop = .2f;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#region 面板修改该选项后要重新启动</span></span><br><span class="line">    public bool xAxisinversion = <span class="literal">false</span>;</span><br><span class="line">    public bool yAsixinversion = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">#endregion</span></span><br><span class="line"></span><br><span class="line">    private void <span class="function"><span class="title">Start</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mainCamera = gameObject.GetComponent&lt;Camera&gt;();</span><br><span class="line">        <span class="keyword">if</span> (mainCamera == null)</span><br><span class="line">        &#123;</span><br><span class="line">            Debug.LogErrorFormat(<span class="string">&quot;摄像机为空!&quot;</span>);</span><br><span class="line">            <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cameraTrans = mainCamera.transform;</span><br><span class="line"></span><br><span class="line">        xAxisCoefficient = xAxisinversion ? -1 : 1;</span><br><span class="line">        yAsixCoefficient = yAsixinversion ? -1 : 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void <span class="function"><span class="title">LateUpdate</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (cameraTrans == null) <span class="built_in">return</span>;</span><br><span class="line"></span><br><span class="line">        KeyBoardControl();</span><br><span class="line"></span><br><span class="line">        MouseLeftDragControl();</span><br><span class="line"></span><br><span class="line">        MouseRightRotateControl();</span><br><span class="line"></span><br><span class="line">        MouseScrollwheelScale();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// 键盘移动</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private void <span class="function"><span class="title">KeyBoardControl</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.W))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Time.timeScale != 0f)</span><br><span class="line">                cameraTrans.Translate(Vector3.forward * Time.deltaTime * moveSpeed);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                cameraTrans.Translate(Vector3.forward * moveSpeedWhenStop * moveSpeed /4);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.S))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Time.timeScale != 0f)</span><br><span class="line">                cameraTrans.Translate(Vector3.back * Time.deltaTime * moveSpeed);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                cameraTrans.Translate(Vector3.back * moveSpeedWhenStop * moveSpeed / 4);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.A))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Time.timeScale != 0f)</span><br><span class="line">                cameraTrans.Translate(Vector3.left * Time.deltaTime * moveSpeed);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                cameraTrans.Translate(Vector3.left * moveSpeedWhenStop * moveSpeed / 4);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKey(KeyCode.D))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Time.timeScale != 0f)</span><br><span class="line">                cameraTrans.Translate(Vector3.right * Time.deltaTime * moveSpeed);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                cameraTrans.Translate(Vector3.right * moveSpeedWhenStop * moveSpeed / 4);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// 鼠标左键拖拽摄像机</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private void <span class="function"><span class="title">MouseLeftDragControl</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButton(0))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(Time.timeScale!=0f)</span><br><span class="line">            &#123;</span><br><span class="line">                Vector3 p1 = cameraTrans.position - cameraTrans.right * Input.GetAxisRaw(_mouseXString) * sensitivityDrag * Time.timeScale;</span><br><span class="line">                Vector3 p2 = p1 - cameraTrans.up * Input.GetAxisRaw(_mouseYString) * sensitivityDrag * Time.timeScale;</span><br><span class="line">                cameraTrans.position = p2;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Vector3 p1 = cameraTrans.position - cameraTrans.right * Input.GetAxisRaw(_mouseXString) * sensitivityDrag * moveSpeedWhenStop;</span><br><span class="line">                Vector3 p2 = p1 - cameraTrans.up * Input.GetAxisRaw(_mouseYString) * sensitivityDrag * moveSpeedWhenStop;</span><br><span class="line">                cameraTrans.position = p2;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// 鼠标右键旋转</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private void <span class="function"><span class="title">MouseRightRotateControl</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButton(1))</span><br><span class="line">        &#123;</span><br><span class="line">            _currentMouseRotate.x = -(Input.GetAxis(_mouseYString) * sensitivityRotate) * xAxisCoefficient;</span><br><span class="line">            _currentMouseRotate.y = -(Input.GetAxis(_mouseXString) * sensitivityRotate) * yAsixCoefficient;</span><br><span class="line"></span><br><span class="line">            cameraTrans.rotation = Quaternion.Euler(cameraTrans.eulerAngles + _currentMouseRotate);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// 鼠标滚轮缩放</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private void <span class="function"><span class="title">MouseScrollwheelScale</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetAxis(_mouseScrollWheel) == 0) <span class="built_in">return</span>;</span><br><span class="line"></span><br><span class="line">        mainCamera.fieldOfView = mainCamera.fieldOfView - Input.GetAxis(_mouseScrollWheel) * sensitivetyMouseWheel;</span><br><span class="line">        mainCamera.fieldOfView = Mathf.Clamp(mainCamera.fieldOfView, fieldOfViewMin, fieldOfviewMax);</span><br><span class="line">        CamDisSlider.value = mainCamera.fieldOfView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li>项目主要控制器脚本：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEngine.UI;</span><br><span class="line">using TMPro;</span><br><span class="line">public class UIScript : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    [Header(<span class="string">&quot;模型&quot;</span>)]</span><br><span class="line">    [SerializeField] private GameObject playerEl;</span><br><span class="line">    [SerializeField] private GameObject playerSp;</span><br><span class="line">    [SerializeField] private GameObject playerRust;</span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;正在播放&quot;</span>)]</span><br><span class="line">    [SerializeField] private TextMeshProUGUI tmpText;</span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;环境光&quot;</span>)]</span><br><span class="line">    [SerializeField] private Slider _LightSlider;</span><br><span class="line">    [SerializeField] private Light _DirectionalLight;</span><br><span class="line">    [SerializeField] private Light centerPointLight;</span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;衣服颜色 For Elinyaa&quot;</span>)]</span><br><span class="line">    [SerializeField] private Material Cloth_Material;</span><br><span class="line">    [SerializeField] private Texture texGold;</span><br><span class="line">    [SerializeField] private Texture texPurple;</span><br><span class="line">    [SerializeField] private Texture texBlue;</span><br><span class="line">    [SerializeField] private Texture texPink;</span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;衣服 For Elinyaa&quot;</span>)]</span><br><span class="line">    [SerializeField] private SkinnedMeshRenderer eyeHeart;</span><br><span class="line">    [SerializeField] private GameObject cloth;</span><br><span class="line">    [SerializeField] private GameObject clothCollar;</span><br><span class="line">    [SerializeField] private GameObject Clothpants;</span><br><span class="line">    [SerializeField] private GameObject clothSleeve;</span><br><span class="line">    [SerializeField] private GameObject ClothUnder;</span><br><span class="line">    [SerializeField] private GameObject Boots;</span><br><span class="line">    [SerializeField] private GameObject hhat;</span><br><span class="line">    [SerializeField] private GameObject necklace;</span><br><span class="line">    [SerializeField] private GameObject Hairpin;</span><br><span class="line">    [SerializeField] private GameObject socks;</span><br><span class="line">    [Header(<span class="string">&quot;衣服 For Sapphy&quot;</span>)]</span><br><span class="line">    [SerializeField] private SkinnedMeshRenderer eyeHeart_sp;</span><br><span class="line">    [SerializeField] private GameObject cloth_sp;</span><br><span class="line">    [SerializeField] private GameObject clothCollar_sp;</span><br><span class="line">    [SerializeField] private GameObject Clothpants_sp;</span><br><span class="line">    [SerializeField] private GameObject clothSleeve_sp;</span><br><span class="line">    [SerializeField] private GameObject ClothUnder_sp;</span><br><span class="line">    [SerializeField] private GameObject Boots_sp;</span><br><span class="line">    [SerializeField] private GameObject hhat_sp;</span><br><span class="line">    [SerializeField] private GameObject socks_sp;</span><br><span class="line">    [Header(<span class="string">&quot;衣服 For Rust&quot;</span>)]</span><br><span class="line">    [SerializeField] private SkinnedMeshRenderer eyeHeart_Rust;</span><br><span class="line">    [SerializeField] private GameObject cloth_Rust;</span><br><span class="line">    [SerializeField] private GameObject socks_Rust;</span><br><span class="line">    [SerializeField] private GameObject boots_Rust;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;相机距离&quot;</span>)]</span><br><span class="line">    [SerializeField] private MMD_VmdCameraLoad mmdCameraDistance;</span><br><span class="line">    [SerializeField] private MMD_VmdCameraLoad_Sap mmdCameraDistanceSap;</span><br><span class="line">    [SerializeField] private MMD_VmdCameraLoad_Rust mmdCameraDistanceRust;</span><br><span class="line">    [SerializeField] private Slider _CamDistanceSlider;</span><br><span class="line">    [SerializeField] private Slider _CamUpDownSlider;</span><br><span class="line">    [SerializeField] private Transform CamUpDownObj;</span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;镜头动作开关&quot;</span>)]</span><br><span class="line">    [SerializeField] private CameraController CamType2;</span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;场景切换开关&quot;</span>)]</span><br><span class="line">    [SerializeField] private List&lt;GameObject&gt; Stages;</span><br><span class="line">    //[SerializeField] private GameObject Stage_1_Sakura;</span><br><span class="line">    //[SerializeField] private GameObject Stage_2_yyl;</span><br><span class="line">    //[SerializeField] private GameObject Stage_3_candy;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [Header(<span class="string">&quot;MMD选择&quot;</span>)]</span><br><span class="line">    [SerializeField] private AudioSource _audiosource;</span><br><span class="line">    [SerializeField] private Animator anim;</span><br><span class="line">    [SerializeField] private Animator animSp;</span><br><span class="line">    [SerializeField] private Animator animRust;</span><br><span class="line">    [SerializeField] private Transform vmdCam;</span><br><span class="line">    [SerializeField] MMD_VmdCameraLoad MMD_VMD;</span><br><span class="line">    [SerializeField] MMD_VmdCameraLoad_Sap MMD_VMD_Sap;</span><br><span class="line">    [SerializeField] MMD_VmdCameraLoad_Rust MMD_VMD_Rust;</span><br><span class="line">    // MMD</span><br><span class="line">    [SerializeField] private AudioClip sound_koi; // 恋爱循环</span><br><span class="line">    [SerializeField] private TextAsset VMD_koi;</span><br><span class="line">    [SerializeField] private AudioClip sound_SingMeToSleep; // Sing Me To Sleep</span><br><span class="line">    [SerializeField] private TextAsset VMD_SingMeToSleep;</span><br><span class="line">    [SerializeField] private AudioClip sound_Gwiyomi; // Gwiyomi</span><br><span class="line">    [SerializeField] private TextAsset VMD_Gwiyomi;</span><br><span class="line">    [SerializeField] private AudioClip sound_HappyHalloween; // Happy Halloween</span><br><span class="line">    [SerializeField] private TextAsset VMD_HappyHalloween;</span><br><span class="line">    [SerializeField] private AudioClip sound_ldsd; // 劣等上等</span><br><span class="line">    [SerializeField] private TextAsset VMD_ldsd;</span><br><span class="line">    [SerializeField] private AudioClip sound_jljt; // 极乐净土</span><br><span class="line">    [SerializeField] private TextAsset VMD_jljt;</span><br><span class="line">    [SerializeField] private AudioClip sound_PinkCat; // PinkCat</span><br><span class="line">    [SerializeField] private TextAsset VMD_PinkCat;</span><br><span class="line">    [SerializeField] private AudioClip sound_ELECT; // ELECT</span><br><span class="line">    [SerializeField] private TextAsset VMD_ELECT;</span><br><span class="line">    [SerializeField] private AudioClip sound_DreamingChuchu; // Dreaming Chuchu </span><br><span class="line">    [SerializeField] private TextAsset VMD_DreamingChuchu;</span><br><span class="line">    [SerializeField] private AudioClip sound_Necomimi; // 猫耳开关</span><br><span class="line">    [SerializeField] private TextAsset VMD_Necomimi;</span><br><span class="line">    [SerializeField] private AudioClip sound_Yumeyume; // Yumeyume</span><br><span class="line">    [SerializeField] private TextAsset VMD_Yumeyume;</span><br><span class="line">    [SerializeField] private AudioClip sound_Linngo; // Linngo</span><br><span class="line">    [SerializeField] private TextAsset VMD_Linngo;</span><br><span class="line">    [SerializeField] private AudioClip sound_lkyb; // 恋空予报</span><br><span class="line">    [SerializeField] private TextAsset VMD_lkyb;</span><br><span class="line">    [SerializeField] private AudioClip sound_badbadWater; // 我的悲伤是水做的</span><br><span class="line">    [SerializeField] private TextAsset VMD_badbadWater;</span><br><span class="line">    [SerializeField] private AudioClip sound_ツギハギスタッカート; // ツギハギスタッカート</span><br><span class="line">    [SerializeField] private TextAsset VMD_ツギハギスタッカート;</span><br><span class="line"></span><br><span class="line">    // R18MMD</span><br><span class="line">    [SerializeField] private AudioClip sound_Conqueror; // Conqueror</span><br><span class="line">    [SerializeField] private TextAsset VMD_Conqueror;</span><br><span class="line">    [SerializeField] private AudioClip sound_PacmanGhosts; // Pac-manGhosts</span><br><span class="line">    [SerializeField] private TextAsset VMD_PacmanGhosts;</span><br><span class="line">    [SerializeField] private AudioClip sound_FullBodied; // FullBodied</span><br><span class="line">    [SerializeField] private TextAsset VMD_FullBodied;</span><br><span class="line">    [SerializeField] private AudioClip sound_Applepie; // Apple pie</span><br><span class="line">    [SerializeField] private TextAsset VMD_Applepie;</span><br><span class="line">    [SerializeField] private AudioClip sound_BubbleButt; // BubbleButt</span><br><span class="line">    [SerializeField] private TextAsset VMD_BubbleButt;</span><br><span class="line">    [SerializeField] private AudioClip sound_SwingDance; // SwingDance</span><br><span class="line">    [SerializeField] private TextAsset VMD_SwingDance;</span><br><span class="line">    [SerializeField] private AudioClip sound_GoodNightKiss; // GoodNightKiss</span><br><span class="line">    [SerializeField] private TextAsset VMD_GoodNightKiss;</span><br><span class="line">    [SerializeField] private AudioClip sound_DojaCat; // Doja Cat</span><br><span class="line">    [SerializeField] private TextAsset VMD_DojaCat;</span><br><span class="line">    [SerializeField] private AudioClip sound_DeepBlueTown; // DeepBlueTown</span><br><span class="line">    [SerializeField] private TextAsset VMD_DeepBlueTown;</span><br><span class="line">    [SerializeField] private AudioClip sound_Mister; // Mister</span><br><span class="line">    [SerializeField] private TextAsset VMD_Mister;</span><br><span class="line">    [SerializeField] private AudioClip sound_Lupin; // Lupin</span><br><span class="line">    [SerializeField] private TextAsset VMD_Lupin;</span><br><span class="line">    [SerializeField] private AudioClip sound_HoldDance; // Hold Dance</span><br><span class="line">    [SerializeField] private TextAsset VMD_HoldDance;</span><br><span class="line">    [SerializeField] private AudioClip sound_Samsara; // Samsara</span><br><span class="line">    [SerializeField] private TextAsset VMD_Samsara;</span><br><span class="line">    [SerializeField] private AudioClip sound_Fireball; // Fireball</span><br><span class="line">    [SerializeField] private TextAsset VMD_Fireball;</span><br><span class="line">    [SerializeField] private AudioClip sound_BaamFull; // Baam full</span><br><span class="line">    [SerializeField] private TextAsset VMD_BaamFull;</span><br><span class="line">    [SerializeField] private AudioClip sound_DestinationCalabria; // Destination Calabria</span><br><span class="line">    [SerializeField] private TextAsset VMD_DestinationCalabria;</span><br><span class="line">    [SerializeField] private AudioClip sound_Lamb; // Lamb</span><br><span class="line">    [SerializeField] private TextAsset VMD_Lamb;</span><br><span class="line">    [SerializeField] private AudioClip sound_ExcuseMe; // ExcuseMe</span><br><span class="line">    [SerializeField] private TextAsset VMD_ExcuseMe;</span><br><span class="line">    [SerializeField] private AudioClip sound_KillerB; // KillerB</span><br><span class="line">    [SerializeField] private TextAsset VMD_KillerB;</span><br><span class="line">    [SerializeField] private AudioClip sound_PushIt; // PushIt</span><br><span class="line">    [SerializeField] private TextAsset VMD_PushIt;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    [SerializeField] private Canvas _canvas;</span><br><span class="line"></span><br><span class="line">    private void <span class="function"><span class="title">Awake</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        Application.targetFrameRate = 60;</span><br><span class="line">        // 暂停状态初始化 录制时注释</span><br><span class="line">        Time.timeScale = 1f;</span><br><span class="line">        UIShow();</span><br><span class="line">    &#125;</span><br><span class="line">    private void <span class="function"><span class="title">Start</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        // 光照值滑块初始化</span><br><span class="line">        _LightSlider.value = _DirectionalLight.intensity;</span><br><span class="line">       </span><br><span class="line">        //Camera.main.GetComponent&lt;AudioSource&gt;().Stop();</span><br><span class="line">        // 相机距离滑块初始化</span><br><span class="line">         _CamDistanceSlider.value = mmdCameraDistance.camFieldOfView;</span><br><span class="line">         _CamUpDownSlider.value = CamUpDownObj.localPosition.y;</span><br><span class="line">        // NowPlaying初始化</span><br><span class="line">        tmpText.text = <span class="string">&quot;Now：&quot;</span> + anim.runtimeAnimatorController.name;</span><br><span class="line">        // 开始时播放的是哪个mmd</span><br><span class="line">        MMD_9_DreamingChuchu();</span><br><span class="line"></span><br><span class="line">        //_audiosource.Play();</span><br><span class="line">        //ChangeModel();</span><br><span class="line">        // 衣服 录制时开启</span><br><span class="line">        //CloPre3_All_ForMovie();</span><br><span class="line">        // 录制时若有延迟开启---------------</span><br><span class="line">        Invoke(<span class="string">&quot;Playmusic&quot;</span>, 1.2f);</span><br><span class="line">        //Playmusic();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    private void <span class="function"><span class="title">Update</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        // 按空格键控制UI显隐</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.Space))</span><br><span class="line">        &#123;</span><br><span class="line">            UIShow();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void <span class="function"><span class="title">UIShow</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (_canvas.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            _canvas.gameObject.SetActive(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            _canvas.gameObject.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    private void <span class="function"><span class="title">Playmusic</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        _audiosource.Play();</span><br><span class="line">    &#125;</span><br><span class="line">    // 环境光照强度</span><br><span class="line">    public void <span class="function"><span class="title">setLight</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        _DirectionalLight.intensity = _LightSlider.value;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">setPointLight</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (centerPointLight.enabled)</span><br><span class="line">        &#123;</span><br><span class="line">            centerPointLight.enabled = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (!centerPointLight.enabled)</span><br><span class="line">        &#123;</span><br><span class="line">            centerPointLight.enabled = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 衣服颜色</span><br><span class="line">    public void <span class="function"><span class="title">ColorGold</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        Cloth_Material.SetTexture(<span class="string">&quot;_MainTex&quot;</span>, texGold);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">ColorPurple</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        Cloth_Material.SetTexture(<span class="string">&quot;_MainTex&quot;</span>, texPurple);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">ColorBlue</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        Cloth_Material.SetTexture(<span class="string">&quot;_MainTex&quot;</span>, texBlue);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">ColorPink</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        Cloth_Material.SetTexture(<span class="string">&quot;_MainTex&quot;</span>, texPink);</span><br><span class="line">    &#125;</span><br><span class="line">    // 播放/暂停</span><br><span class="line">    public void <span class="function"><span class="title">StartOrStop</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Time.timeScale == 0)</span><br><span class="line">        &#123;</span><br><span class="line">            Time.timeScale = 1f;</span><br><span class="line">            _audiosource.Play();</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (Time.timeScale == 1f)</span><br><span class="line">        &#123;</span><br><span class="line">            Time.timeScale = 0f;</span><br><span class="line">            _audiosource.Pause();</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">    // 衣服</span><br><span class="line">    public void <span class="function"><span class="title">EyeHeart</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (eyeHeart.GetBlendShapeWeight(62) == 0)</span><br><span class="line">                eyeHeart.SetBlendShapeWeight(62, 100);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (eyeHeart.GetBlendShapeWeight(62) == 100)</span><br><span class="line">                eyeHeart.SetBlendShapeWeight(62, 0);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(playerSp.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (eyeHeart_sp.GetBlendShapeWeight(67) == 0)</span><br><span class="line">                eyeHeart_sp.SetBlendShapeWeight(67, 100);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (eyeHeart_sp.GetBlendShapeWeight(67) == 100)</span><br><span class="line">                eyeHeart_sp.SetBlendShapeWeight(67, 0);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (eyeHeart_Rust.GetBlendShapeWeight(173) == 0)</span><br><span class="line">                eyeHeart_Rust.SetBlendShapeWeight(173, 100);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (eyeHeart_Rust.GetBlendShapeWeight(173) == 100)</span><br><span class="line">                eyeHeart_Rust.SetBlendShapeWeight(173, 0);</span><br><span class="line"></span><br><span class="line">            //for (int i = 0; i &lt; 249; i++)</span><br><span class="line">            //&#123;</span><br><span class="line">            //    <span class="keyword">if</span> (eyeHeart_Rust.GetBlendShapeWeight(i) == 100)</span><br><span class="line">            //        Debug.Log(i);</span><br><span class="line">                    </span><br><span class="line">            //&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">Clothes_cloth</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (cloth.activeSelf)</span><br><span class="line">                cloth.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!cloth.activeSelf)</span><br><span class="line">                cloth.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (cloth_sp.activeSelf)</span><br><span class="line">                cloth_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!cloth_sp.activeSelf)</span><br><span class="line">                cloth_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (cloth_Rust.activeSelf)</span><br><span class="line">                cloth_Rust.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!cloth_Rust.activeSelf)</span><br><span class="line">                cloth_Rust.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">Clothes_hat</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (hhat.activeSelf)</span><br><span class="line">                hhat.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!hhat.activeSelf)</span><br><span class="line">                hhat.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (hhat_sp.activeSelf)</span><br><span class="line">                hhat_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!hhat_sp.activeSelf)</span><br><span class="line">                hhat_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">Clothes_sleeve</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (clothSleeve.activeSelf)</span><br><span class="line">                clothSleeve.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!clothSleeve.activeSelf)</span><br><span class="line">                clothSleeve.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (clothSleeve_sp.activeSelf)</span><br><span class="line">                clothSleeve_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!clothSleeve_sp.activeSelf)</span><br><span class="line">                clothSleeve_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">Clothes_socks</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (socks.activeSelf)</span><br><span class="line">                socks.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!socks.activeSelf)</span><br><span class="line">                socks.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (socks_sp.activeSelf)</span><br><span class="line">                socks_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!socks_sp.activeSelf)</span><br><span class="line">                socks_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (socks_Rust.activeSelf)</span><br><span class="line">                socks_Rust.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!socks_Rust.activeSelf)</span><br><span class="line">                socks_Rust.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">Clothes_clothpants</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Clothpants.activeSelf)</span><br><span class="line">                Clothpants.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!Clothpants.activeSelf)</span><br><span class="line">                Clothpants.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Clothpants_sp.activeSelf)</span><br><span class="line">                Clothpants_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!Clothpants_sp.activeSelf)</span><br><span class="line">                Clothpants_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">Clothes_boots</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Boots.activeSelf)</span><br><span class="line">                Boots.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!Boots.activeSelf)</span><br><span class="line">                Boots.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Boots_sp.activeSelf)</span><br><span class="line">                Boots_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!Boots_sp.activeSelf)</span><br><span class="line">                Boots_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (boots_Rust.activeSelf)</span><br><span class="line">                boots_Rust.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!boots_Rust.activeSelf)</span><br><span class="line">                boots_Rust.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">Clothes_under</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (ClothUnder.activeSelf)</span><br><span class="line">                ClothUnder.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!ClothUnder.activeSelf)</span><br><span class="line">                ClothUnder.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (ClothUnder_sp.activeSelf)</span><br><span class="line">                ClothUnder_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!ClothUnder_sp.activeSelf)</span><br><span class="line">                ClothUnder_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">Clothes_collar</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (clothCollar.activeSelf)</span><br><span class="line">                clothCollar.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!clothCollar.activeSelf)</span><br><span class="line">                clothCollar.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (clothCollar_sp.activeSelf)</span><br><span class="line">                clothCollar_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!clothCollar_sp.activeSelf)</span><br><span class="line">                clothCollar_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">CloPre1</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            cloth.SetActive(<span class="literal">true</span>);</span><br><span class="line">            clothCollar.SetActive(<span class="literal">true</span>);</span><br><span class="line">            Clothpants.SetActive(<span class="literal">true</span>);</span><br><span class="line">            clothSleeve.SetActive(<span class="literal">true</span>);</span><br><span class="line">            ClothUnder.SetActive(<span class="literal">true</span>);</span><br><span class="line">            Boots.SetActive(<span class="literal">true</span>);</span><br><span class="line">            hhat.SetActive(<span class="literal">true</span>);</span><br><span class="line">            necklace.SetActive(<span class="literal">true</span>);</span><br><span class="line">            Hairpin.SetActive(<span class="literal">true</span>);</span><br><span class="line">            socks.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            cloth_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            clothCollar_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            Clothpants_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            clothSleeve_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            ClothUnder_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            Boots_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            hhat_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            socks_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            cloth_Rust.SetActive(<span class="literal">true</span>);</span><br><span class="line">            socks_Rust.SetActive(<span class="literal">true</span>);</span><br><span class="line">            boots_Rust.SetActive(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">CloPre2</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            cloth.SetActive(<span class="literal">false</span>);</span><br><span class="line">            clothCollar.SetActive(<span class="literal">false</span>);</span><br><span class="line">            Clothpants.SetActive(<span class="literal">false</span>);</span><br><span class="line">            clothSleeve.SetActive(<span class="literal">false</span>);</span><br><span class="line">            ClothUnder.SetActive(<span class="literal">true</span>);</span><br><span class="line">            Boots.SetActive(<span class="literal">false</span>);</span><br><span class="line">            hhat.SetActive(<span class="literal">false</span>);</span><br><span class="line">            necklace.SetActive(<span class="literal">false</span>);</span><br><span class="line">            Hairpin.SetActive(<span class="literal">false</span>);</span><br><span class="line">            socks.SetActive(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            cloth_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            clothCollar_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            Clothpants_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            clothSleeve_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            ClothUnder_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            Boots_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            hhat_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            socks_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            cloth_Rust.SetActive(<span class="literal">false</span>);</span><br><span class="line">            socks_Rust.SetActive(<span class="literal">false</span>);</span><br><span class="line">            boots_Rust.SetActive(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void <span class="function"><span class="title">CloPre3_All_ForMovie</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            cloth.SetActive(<span class="literal">false</span>);</span><br><span class="line">            clothCollar.SetActive(<span class="literal">false</span>);</span><br><span class="line">            Clothpants.SetActive(<span class="literal">false</span>);</span><br><span class="line">            clothSleeve.SetActive(<span class="literal">false</span>);</span><br><span class="line">            ClothUnder.SetActive(<span class="literal">false</span>);</span><br><span class="line">            Boots.SetActive(<span class="literal">false</span>);</span><br><span class="line">            hhat.SetActive(<span class="literal">false</span>);</span><br><span class="line">            necklace.SetActive(<span class="literal">false</span>);</span><br><span class="line">            Hairpin.SetActive(<span class="literal">false</span>);</span><br><span class="line">            socks.SetActive(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            cloth_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            clothCollar_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            Clothpants_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            clothSleeve_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            ClothUnder_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            Boots_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            hhat_sp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            socks_sp.SetActive(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.gameObject.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            cloth_Rust.SetActive(<span class="literal">false</span>);</span><br><span class="line">            socks_Rust.SetActive(<span class="literal">false</span>);</span><br><span class="line">            boots_Rust.SetActive(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 相机距离</span><br><span class="line">    public void <span class="function"><span class="title">SetCamDistance</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(mmdCameraDistance.enabled)</span><br><span class="line">        &#123;</span><br><span class="line">            mmdCameraDistance.camFieldOfView = _CamDistanceSlider.value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(mmdCameraDistanceSap.enabled)</span><br><span class="line">        &#123;</span><br><span class="line">            mmdCameraDistanceSap.camFieldOfView = _CamDistanceSlider.value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(mmdCameraDistanceRust.enabled)</span><br><span class="line">        &#123;</span><br><span class="line">            mmdCameraDistanceRust.camFieldOfView = _CamDistanceSlider.value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">SetCamUpDown</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        CamUpDownObj.localPosition = new Vector3(CamUpDownObj.localPosition.x, _CamUpDownSlider.value, CamUpDownObj.localPosition.z);</span><br><span class="line">    &#125;</span><br><span class="line">    // 镜头动作开关</span><br><span class="line">    public void <span class="function"><span class="title">CamChoose</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!CamType2.enabled)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(playerEl.activeSelf)</span><br><span class="line">                mmdCameraDistance.enabled = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(playerSp.activeSelf)</span><br><span class="line">                mmdCameraDistanceSap.enabled = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.activeSelf)</span><br><span class="line">                mmdCameraDistanceRust.enabled = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            CamType2.enabled = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (CamType2.enabled)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(playerEl.activeSelf)</span><br><span class="line">                mmdCameraDistance.enabled= <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(playerSp.activeSelf)</span><br><span class="line">                mmdCameraDistanceSap.enabled = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.activeSelf)</span><br><span class="line">                mmdCameraDistanceRust.enabled = <span class="literal">true</span>;</span><br><span class="line">            CamType2.enabled = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 场景切换</span><br><span class="line">    public void <span class="function"><span class="title">StageChoose</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        //if (Stage_1_Sakura.activeSelf)</span><br><span class="line">        //&#123;</span><br><span class="line">        //    Stage_2_yyl.SetActive(<span class="literal">true</span>);</span><br><span class="line">        //    Stage_1_Sakura.SetActive(<span class="literal">false</span>);</span><br><span class="line">        //&#125;</span><br><span class="line">        //else <span class="keyword">if</span>(Stage_2_yyl.activeSelf)</span><br><span class="line">        //&#123;</span><br><span class="line">        //    Stage_3_candy.SetActive(<span class="literal">true</span>);</span><br><span class="line">        //    Stage_2_yyl.SetActive(<span class="literal">false</span>);</span><br><span class="line">        //&#125;</span><br><span class="line">        //else <span class="keyword">if</span> (Stage_3_candy.activeSelf)</span><br><span class="line">        //&#123;</span><br><span class="line">        //    Stage_1_Sakura.SetActive(<span class="literal">true</span>);</span><br><span class="line">        //    Stage_3_candy.SetActive(<span class="literal">false</span>);</span><br><span class="line">        //&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (int i = 0; i &lt; Stages.Count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Stages[i].activeSelf)</span><br><span class="line">            &#123;</span><br><span class="line">                Stages[(i == Stages.Count - 1) ? 0 : i + 1].SetActive(<span class="literal">true</span>);</span><br><span class="line">                Stages[i].SetActive(<span class="literal">false</span>);</span><br><span class="line">                <span class="built_in">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 模型切换</span><br><span class="line">    public void <span class="function"><span class="title">ChangeModel</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            MMD_VMD.enabled = <span class="literal">false</span>;</span><br><span class="line">            </span><br><span class="line">            playerSp.SetActive(<span class="literal">true</span>);</span><br><span class="line">            playerSp.transform.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            playerSp.transform.localRotation = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">            animSp.runtimeAnimatorController = null;</span><br><span class="line">            RuntimeAnimatorController animator = (RuntimeAnimatorController)Resources.Load(anim.runtimeAnimatorController.name);</span><br><span class="line">            animSp.runtimeAnimatorController = (RuntimeAnimatorController)animator;</span><br><span class="line"></span><br><span class="line">            playerEl.SetActive(<span class="literal">false</span>);</span><br><span class="line">            //playerRust.SetActive(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            MMD_VMD_Sap.enabled = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(Time.timeScale == 1f)</span><br><span class="line">            &#123;</span><br><span class="line">                _audiosource.Stop();</span><br><span class="line">                _audiosource.Play();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(Time.timeScale == 0f)</span><br><span class="line">            &#123;</span><br><span class="line">                _audiosource.Stop();</span><br><span class="line">            &#125;</span><br><span class="line">            mmdChange(animSp.runtimeAnimatorController.name, _audiosource.clip, MMD_VMD.Select_VMD);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            MMD_VMD_Sap.enabled = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            playerRust.SetActive(<span class="literal">true</span>);</span><br><span class="line">            playerRust.transform.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            playerRust.transform.localRotation = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">            animRust.runtimeAnimatorController = null;</span><br><span class="line">            RuntimeAnimatorController animator = (RuntimeAnimatorController)Resources.Load(animSp.runtimeAnimatorController.name);</span><br><span class="line">            animRust.runtimeAnimatorController = (RuntimeAnimatorController)animator;</span><br><span class="line">            playerSp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            //playerRust.SetActive(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            MMD_VMD_Rust.enabled = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (Time.timeScale == 1f)</span><br><span class="line">            &#123;</span><br><span class="line">                _audiosource.Stop();</span><br><span class="line">                _audiosource.Play();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (Time.timeScale == 0f)</span><br><span class="line">            &#123;</span><br><span class="line">                _audiosource.Stop();</span><br><span class="line">            &#125;</span><br><span class="line">            mmdChange(animRust.runtimeAnimatorController.name, _audiosource.clip, MMD_VMD_Sap.Select_VMD);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            MMD_VMD_Rust.enabled = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">            playerEl.SetActive(<span class="literal">true</span>);</span><br><span class="line">            playerEl.transform.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            playerEl.transform.localRotation = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">            anim.runtimeAnimatorController = null;</span><br><span class="line">            RuntimeAnimatorController animator = (RuntimeAnimatorController)Resources.Load(animRust.runtimeAnimatorController.name);</span><br><span class="line">            anim.runtimeAnimatorController = (RuntimeAnimatorController)animator;</span><br><span class="line">            //playerSp.SetActive(<span class="literal">false</span>);</span><br><span class="line">            playerRust.SetActive(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            MMD_VMD.enabled = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (Time.timeScale == 1f)</span><br><span class="line">            &#123;</span><br><span class="line">                _audiosource.Stop();</span><br><span class="line">                _audiosource.Play();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (Time.timeScale == 0f)</span><br><span class="line">            &#123;</span><br><span class="line">                _audiosource.Stop();</span><br><span class="line">            &#125;</span><br><span class="line">            mmdChange(anim.runtimeAnimatorController.name, _audiosource.clip, MMD_VMD_Rust.Select_VMD);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // MMD选择 只需传递Resources路径、音频片段、vmd文件</span><br><span class="line">    public void <span class="function"><span class="title">MMD_1_koi</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;恋爱循环&quot;</span>, sound_koi,VMD_koi);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_2_SingMeToSleep</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;SingMeToSleep&quot;</span>, sound_SingMeToSleep,VMD_SingMeToSleep);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_3_Gwiyomi</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Gwiyomi&quot;</span>, sound_Gwiyomi, VMD_Gwiyomi);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_4_HappyHalloween</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;HappyHalloween&quot;</span>, sound_HappyHalloween, VMD_HappyHalloween);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_5_ldsd</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;劣等上等&quot;</span>, sound_ldsd, VMD_ldsd);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_6_jljt</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;极乐净土&quot;</span>, sound_jljt, VMD_jljt);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_7_PinkCat</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;PinkCat&quot;</span>, sound_PinkCat, VMD_PinkCat);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_8_ELECT</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Elect&quot;</span>, sound_ELECT, VMD_ELECT);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_9_DreamingChuchu</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;DreamingChuchu&quot;</span>, sound_DreamingChuchu, VMD_DreamingChuchu);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_10_Necomimi</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;猫耳开关&quot;</span>, sound_Necomimi, VMD_Necomimi);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_11_Yumeyume</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Yumeyume&quot;</span>, sound_Yumeyume, VMD_Yumeyume);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_12_Linngo</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;林檎花火とソーダの海&quot;</span>, sound_Linngo, VMD_Linngo);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_13_lkyb</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;恋空予报&quot;</span>, sound_lkyb, VMD_lkyb);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">MMD_14_badbadWater</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;我的悲伤是水做的&quot;</span>, sound_badbadWater, VMD_badbadWater);</span><br><span class="line">    &#125;</span><br><span class="line">    public void MMD_15_ツギハギスタッカート()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;ツギハギスタッカート&quot;</span>, sound_ツギハギスタッカート, VMD_ツギハギスタッカート);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // R18MMD</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_1_Conqueror</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Conqueror&quot;</span>, sound_Conqueror, VMD_Conqueror);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_2_PacmanGhosts</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;PacmanGhosts&quot;</span>, sound_PacmanGhosts, VMD_PacmanGhosts);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_3_FullBodied</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;FullBodied&quot;</span>, sound_FullBodied, VMD_FullBodied);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_4_Applepie</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Applepie&quot;</span>, sound_Applepie, VMD_Applepie);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_5_BubbleButt</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;BubbleButt&quot;</span>, sound_BubbleButt, VMD_BubbleButt);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_6_SwingDance</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;SwingDance&quot;</span>, sound_SwingDance, VMD_SwingDance);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_7_GoodNightKiss</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;GoodNightKiss&quot;</span>, sound_GoodNightKiss, VMD_GoodNightKiss);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_8_DojaCat</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;DojaCat&quot;</span>, sound_DojaCat, VMD_DojaCat);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_9_DeepBlueTown</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;DeepBlueTown&quot;</span>, sound_DeepBlueTown, VMD_DeepBlueTown);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_10_Mister</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Mister&quot;</span>, sound_Mister, VMD_Mister);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_11_Lupin</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Lupin&quot;</span>, sound_Lupin, VMD_Lupin);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_12_HoldDance</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;HoldDance&quot;</span>, sound_HoldDance, VMD_HoldDance);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_13_Samsara</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Samsara&quot;</span>, sound_Samsara, VMD_Samsara);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_14_Fireball</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Fireball&quot;</span>, sound_Fireball, VMD_Fireball);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_15_BaamFull</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;BaamFull&quot;</span>, sound_BaamFull, VMD_BaamFull);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_16_DestinationCalabria</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;DestinationCalabria&quot;</span>, sound_DestinationCalabria, VMD_DestinationCalabria);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_17_Lamb</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;Lamb&quot;</span>, sound_Lamb, VMD_Lamb);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_18_ExcuseMe</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;ExcuseMe&quot;</span>, sound_ExcuseMe, VMD_ExcuseMe);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_19_KillerB</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;KillerB&quot;</span>, sound_KillerB, VMD_KillerB);</span><br><span class="line">    &#125;</span><br><span class="line">    public void <span class="function"><span class="title">R18MMD_20_PushIt</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        mmdChange(<span class="string">&quot;PushIt&quot;</span>, sound_PushIt, VMD_PushIt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Motions</span><br><span class="line">    public void <span class="function"><span class="title">Motions_1_motion1</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        motionChange(<span class="string">&quot;motion1&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (playerEl.activeSelf)</span><br><span class="line">            mmdCameraDistance.enabled = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.activeSelf)</span><br><span class="line">            mmdCameraDistanceSap.enabled = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.activeSelf)</span><br><span class="line">            mmdCameraDistanceRust.enabled = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        CamType2.enabled = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        Camera.main.transform.localPosition = new Vector3(0, .38f, -.64f);</span><br><span class="line">        Quaternion rot = Quaternion.Euler(11.51f, 0f, 0f);</span><br><span class="line">        Camera.main.transform.localRotation = rot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void mmdChange(string strPath, AudioClip a, TextAsset vmdtext)</span><br><span class="line">    &#123;</span><br><span class="line">        // 如果MMD_VMD_Rust的distanceOffset改变了，能被检测到，执行两次mmdChange()</span><br><span class="line">        <span class="built_in">float</span> tempDistance = MMD_VMD_Rust.distanceOffset;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(int i = 0;i&lt;86;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == 62) <span class="built_in">continue</span>;</span><br><span class="line">                    eyeHeart.SetBlendShapeWeight(i, 0);</span><br><span class="line">            &#125;</span><br><span class="line">            tmpText.text = <span class="string">&quot;Now：&quot;</span> + strPath;</span><br><span class="line">            playerEl.transform.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            playerEl.transform.localRotation = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">            <span class="keyword">if</span> (strPath == <span class="string">&quot;HoldDance&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                playerEl.transform.localPosition = new Vector3(0, 0.3f, 0);</span><br><span class="line">            &#125;</span><br><span class="line">            anim.runtimeAnimatorController = null;</span><br><span class="line">            RuntimeAnimatorController animator = (RuntimeAnimatorController)Resources.Load(strPath);</span><br><span class="line">            anim.runtimeAnimatorController = (RuntimeAnimatorController)animator;</span><br><span class="line">            _audiosource.Stop();</span><br><span class="line">            _audiosource.clip = a;</span><br><span class="line">            <span class="keyword">if</span> (Time.timeScale == 1f)</span><br><span class="line">            &#123;</span><br><span class="line">                _audiosource.Play();</span><br><span class="line">            &#125;</span><br><span class="line">            MMD_VMD.Select_VMD = vmdtext;</span><br><span class="line">            MMD_VMD.Start();</span><br><span class="line">            <span class="keyword">if</span> (CamType2.enabled) <span class="built_in">return</span>;</span><br><span class="line">            vmdCam.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            vmdCam.GetChild(0).localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            Quaternion rotation = Quaternion.Euler(0f, 0f, 0f);</span><br><span class="line">            vmdCam.localRotation = rotation;</span><br><span class="line">            vmdCam.GetChild(0).localRotation = rotation;</span><br><span class="line">            Camera.main.transform.localPosition = new Vector3(0f, 0f, 0f);</span><br><span class="line">            Camera.main.transform.localRotation = rotation;</span><br><span class="line">            <span class="keyword">if</span> (strPath == <span class="string">&quot;Applepie&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(.14f, 0, 5.44f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Conqueror&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -0.3076369f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Gwiyomi&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, .6f, -1.24f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;DeepBlueTown&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.54f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Mister&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.38f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Lupin&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.1f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;SingMeToSleep&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.3f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Samsara&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Fireball&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.05f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Elect&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.25f, 7.35f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;恋空予报&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(strPath == <span class="string">&quot;BaamFull&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(strPath == <span class="string">&quot;DestinationCalabria&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.22f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Lamb&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.22f, 6.8f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;ExcuseMe&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.15f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;KillerB&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 4f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;我的悲伤是水做的&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.15f, .81f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;ツギハギスタッカート&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(.05f, -.4f, .58f);</span><br><span class="line">                Invoke(<span class="string">&quot;ChangeCam&quot;</span>, 8f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;DreamingChuchu&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.15f, 0.2f);</span><br><span class="line">                Invoke(<span class="string">&quot;ChangeCam&quot;</span>, 9f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(playerSp.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 76; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == 67) <span class="built_in">continue</span>;</span><br><span class="line">                eyeHeart_sp.SetBlendShapeWeight(i, 0);</span><br><span class="line">            &#125;</span><br><span class="line">            tmpText.text = <span class="string">&quot;Now：&quot;</span> + strPath;</span><br><span class="line">            playerSp.transform.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            playerSp.transform.localRotation = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">            <span class="keyword">if</span> (strPath == <span class="string">&quot;HoldDance&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                playerSp.transform.localPosition = new Vector3(0, 0.3f, 0);</span><br><span class="line">            &#125;</span><br><span class="line">            animSp.runtimeAnimatorController = null;</span><br><span class="line">            RuntimeAnimatorController animator = (RuntimeAnimatorController)Resources.Load(strPath);</span><br><span class="line">            animSp.runtimeAnimatorController = (RuntimeAnimatorController)animator;</span><br><span class="line">            _audiosource.Stop();</span><br><span class="line">            _audiosource.clip = a;</span><br><span class="line">            <span class="keyword">if</span> (Time.timeScale == 1f)</span><br><span class="line">            &#123;</span><br><span class="line">                _audiosource.Play();</span><br><span class="line">            &#125;</span><br><span class="line">            MMD_VMD_Sap.Select_VMD = vmdtext;</span><br><span class="line">            MMD_VMD_Sap.Start();</span><br><span class="line">            <span class="keyword">if</span> (CamType2.enabled) <span class="built_in">return</span>;</span><br><span class="line">            vmdCam.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            vmdCam.GetChild(0).localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            Quaternion rotation = Quaternion.Euler(0f, 0f, 0f);</span><br><span class="line">            vmdCam.localRotation = rotation;</span><br><span class="line">            vmdCam.GetChild(0).localRotation = rotation;</span><br><span class="line">            Camera.main.transform.localPosition = new Vector3(0f, 0f, 0f);</span><br><span class="line">            Camera.main.transform.localRotation = rotation;</span><br><span class="line">            <span class="keyword">if</span> (strPath == <span class="string">&quot;Applepie&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(.14f, 0, 5.44f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Conqueror&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -0.1f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Gwiyomi&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, .8f, -1.24f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;DeepBlueTown&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.54f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Mister&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.52f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Lupin&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.1f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;SingMeToSleep&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.3f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Samsara&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Fireball&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.05f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(strPath == <span class="string">&quot;FullBodied&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, .14f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;SwingDance&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, .15f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Elect&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.15f, 7.35f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;恋空予报&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;BaamFull&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.1f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;DestinationCalabria&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.1f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Lamb&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.1f, 6.8f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;KillerB&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.1f, 4f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;我的悲伤是水做的&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, 0f, .81f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;ツギハギスタッカート&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(.05f, -.24f, .55f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 249; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == 173) <span class="built_in">continue</span>; // heart_eye</span><br><span class="line">                eyeHeart_sp.SetBlendShapeWeight(i, 0);</span><br><span class="line">            &#125;</span><br><span class="line">            tmpText.text = <span class="string">&quot;Now：&quot;</span> + strPath;</span><br><span class="line">            playerRust.transform.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            playerRust.transform.localRotation = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">            <span class="keyword">if</span> (strPath == <span class="string">&quot;HoldDance&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                playerRust.transform.localPosition = new Vector3(0, 0.3f, 0);</span><br><span class="line">            &#125;</span><br><span class="line">            animRust.runtimeAnimatorController = null;</span><br><span class="line">            RuntimeAnimatorController animator = (RuntimeAnimatorController)Resources.Load(strPath);</span><br><span class="line">            animRust.runtimeAnimatorController = (RuntimeAnimatorController)animator;</span><br><span class="line">            _audiosource.Stop();</span><br><span class="line">            _audiosource.clip = a;</span><br><span class="line">            <span class="keyword">if</span> (Time.timeScale == 1f)</span><br><span class="line">            &#123;</span><br><span class="line">                _audiosource.Play();</span><br><span class="line">            &#125;</span><br><span class="line">            MMD_VMD_Rust.Select_VMD = vmdtext;</span><br><span class="line">            MMD_VMD_Rust.Start();</span><br><span class="line">            <span class="keyword">if</span> (CamType2.enabled) <span class="built_in">return</span>;</span><br><span class="line">            vmdCam.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            vmdCam.GetChild(0).localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            Quaternion rotation = Quaternion.Euler(0f, 0f, 0f);</span><br><span class="line">            vmdCam.localRotation = rotation;</span><br><span class="line">            vmdCam.GetChild(0).localRotation = rotation;</span><br><span class="line">            Camera.main.transform.localPosition = new Vector3(0f, 0f, 0f);</span><br><span class="line">            Camera.main.transform.localRotation = rotation;</span><br><span class="line">            MMD_VMD_Rust.distanceOffset = 1f;</span><br><span class="line">            <span class="keyword">if</span> (strPath == <span class="string">&quot;Applepie&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(.14f, 0, 5.44f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Conqueror&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -0.3076369f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Gwiyomi&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, .6f, -1.24f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;DeepBlueTown&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.54f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Mister&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.38f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Lupin&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.1f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;SingMeToSleep&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.3f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Samsara&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Fireball&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.05f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Elect&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.25f, 7.35f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;恋空予报&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;BaamFull&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;DestinationCalabria&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.22f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;Lamb&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.22f, 6.8f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;ExcuseMe&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.15f, 0f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;KillerB&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.2f, 4f);</span><br><span class="line">                Quaternion rot = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">                Camera.main.transform.localRotation = rot;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;我的悲伤是水做的&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(0f, -.15f, .81f);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (strPath == <span class="string">&quot;ツギハギスタッカート&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                MMD_VMD_Rust.distanceOffset = 2.1f;</span><br><span class="line">                Camera.main.transform.localPosition = new Vector3(.05f, -.39f, .27f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(playerRust.activeSelf &amp;&amp; tempDistance != MMD_VMD_Rust.distanceOffset)</span><br><span class="line">        &#123;</span><br><span class="line">            mmdChange(tmpText.text.Substring(4, tmpText.text.Length - 4), _audiosource.clip, MMD_VMD_Rust.Select_VMD);</span><br><span class="line">        &#125;</span><br><span class="line">        // Debug.Log(MMD_VMD_Rust.distanceOffset);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void motionChange(string strPath)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (playerEl.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 86; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == 62) <span class="built_in">continue</span>;</span><br><span class="line">                eyeHeart.SetBlendShapeWeight(i, 0);</span><br><span class="line">            &#125;</span><br><span class="line">            tmpText.text = <span class="string">&quot;Now：&quot;</span> + strPath;</span><br><span class="line">            playerEl.transform.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            playerEl.transform.localRotation = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">            </span><br><span class="line">            anim.runtimeAnimatorController = null;</span><br><span class="line">            RuntimeAnimatorController animator = (RuntimeAnimatorController)Resources.Load(strPath);</span><br><span class="line">            anim.runtimeAnimatorController = (RuntimeAnimatorController)animator;</span><br><span class="line">            _audiosource.Stop();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (CamType2.enabled) <span class="built_in">return</span>;</span><br><span class="line">            vmdCam.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            vmdCam.GetChild(0).localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            Quaternion rotation = Quaternion.Euler(0f, 0f, 0f);</span><br><span class="line">            vmdCam.localRotation = rotation;</span><br><span class="line">            vmdCam.GetChild(0).localRotation = rotation;</span><br><span class="line">            Camera.main.transform.localPosition = new Vector3(0f, 0f, 0f);</span><br><span class="line">            Camera.main.transform.localRotation = rotation;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerSp.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 76; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == 67) <span class="built_in">continue</span>;</span><br><span class="line">                eyeHeart_sp.SetBlendShapeWeight(i, 0);</span><br><span class="line">            &#125;</span><br><span class="line">            tmpText.text = <span class="string">&quot;Now：&quot;</span> + strPath;</span><br><span class="line">            playerSp.transform.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            playerSp.transform.localRotation = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">            </span><br><span class="line">            animSp.runtimeAnimatorController = null;</span><br><span class="line">            RuntimeAnimatorController animator = (RuntimeAnimatorController)Resources.Load(strPath);</span><br><span class="line">            animSp.runtimeAnimatorController = (RuntimeAnimatorController)animator;</span><br><span class="line">            _audiosource.Stop();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (CamType2.enabled) <span class="built_in">return</span>;</span><br><span class="line">            vmdCam.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            vmdCam.GetChild(0).localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            Quaternion rotation = Quaternion.Euler(0f, 0f, 0f);</span><br><span class="line">            vmdCam.localRotation = rotation;</span><br><span class="line">            vmdCam.GetChild(0).localRotation = rotation;</span><br><span class="line">            Camera.main.transform.localPosition = new Vector3(0f, 0f, 0f);</span><br><span class="line">            Camera.main.transform.localRotation = rotation;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (playerRust.activeSelf)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (int i = 0; i &lt; 249; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == 173) <span class="built_in">continue</span>; // heart_eye</span><br><span class="line">                eyeHeart_sp.SetBlendShapeWeight(i, 0);</span><br><span class="line">            &#125;</span><br><span class="line">            tmpText.text = <span class="string">&quot;Now：&quot;</span> + strPath;</span><br><span class="line">            playerRust.transform.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            playerRust.transform.localRotation = Quaternion.Euler(0f, 180f, 0f);</span><br><span class="line">            </span><br><span class="line">            animRust.runtimeAnimatorController = null;</span><br><span class="line">            RuntimeAnimatorController animator = (RuntimeAnimatorController)Resources.Load(strPath);</span><br><span class="line">            animRust.runtimeAnimatorController = (RuntimeAnimatorController)animator;</span><br><span class="line">            _audiosource.Stop();</span><br><span class="line">           </span><br><span class="line">            <span class="keyword">if</span> (CamType2.enabled) <span class="built_in">return</span>;</span><br><span class="line">            vmdCam.localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            vmdCam.GetChild(0).localPosition = new Vector3(0, 0, 0);</span><br><span class="line">            Quaternion rotation = Quaternion.Euler(0f, 0f, 0f);</span><br><span class="line">            vmdCam.localRotation = rotation;</span><br><span class="line">            vmdCam.GetChild(0).localRotation = rotation;</span><br><span class="line">            Camera.main.transform.localPosition = new Vector3(0f, 0f, 0f);</span><br><span class="line">            Camera.main.transform.localRotation = rotation;</span><br><span class="line">            MMD_VMD_Rust.distanceOffset = 1f;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void <span class="function"><span class="title">ChangeCam</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        // Camera.main.transform.localPosition = new Vector3(.05f, -.3f, .8f); // kato</span><br><span class="line">        Camera.main.transform.localPosition = new Vector3(0f, -.5f, 0.2f); // DreamChuChu</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div>
        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5 itemprop="copyrightNotice">本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
                <div class="post-like-donate text-center clearfix" id="post-like-donate">
                
                
                    <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> 分享</a>
                    <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "http://example.com/2022/08/20/UnityMMDCreateTutorial/",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "http://example.com/2022/08/20/UnityMMDCreateTutorial/";
            const title         = "「在Unity中制作MMD舞蹈视频」";
            const excerpt       = `&emsp;`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                
                </div>
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    <a class="tag-none-link" href="/tags/Unity/" rel="tag">Unity</a>, <a class="tag-none-link" href="/tags/%E6%96%87%E6%A1%A3/" rel="tag">文档</a>
                </div>
                <div class="pull-date">
                    <time datetime="2025-08-11T09:35:59.901Z" itemprop="dateModified">最后编辑：2025-08-11</time>
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" 性能优化(8)编辑器创建资源优化(1)——场景" href="/2022/08/19/performanceOptimization-8/">&lt; 上一篇</a>
            </div>
            
            
            <div class="nav-next clearfix">
                <a title=" Unity Shader入门精要 第七章" href="/2022/08/26/Shader学习笔记-6/">下一篇 &gt;</a>
            </div>
            
        </nav>
    
    
        <div id="disqus_thread" class="post-comments lazy-load"></div>

<script>
    var disqus_config = function () {
        this.page.url = 'http://example.com/2022/08/20/UnityMMDCreateTutorial/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = '2022/08/20/UnityMMDCreateTutorial/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    var load_comm = () => {
        if (typeof DISQUS === 'undefined') {
            var d = document, s = d.createElement('script');
            s.src = 'https://unishiki.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        } else {
            DISQUS.reset({
                reload: true,
                config: function () {  
                    this.page.url = 'http://example.com/2022/08/20/UnityMMDCreateTutorial/';  // Replace PAGE_URL with your page's canonical URL variable
                    this.page.identifier = '2022/08/20/UnityMMDCreateTutorial/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                }
            });
        }
    };
    
</script>
<script async id="dsq-count-scr" src="//unishiki.disqus.com/count.js"></script>

<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
</article>

        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/ava1.jpg" loading="lazy" decoding="auto" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"></p>
    </div>
    <div class="site-meta">
        <a class="meta-item" href="/archives/">
            <span class="title">
                文章
            </span>
            <span class="count">
                116
            </span>
        </a>
        <a class="meta-item" href="/categories/">
            <span class="title">
                分类
            </span>
            <span class="count">
                3
            </span>
        </a>
        <a class="meta-item" href="/tags/">
            <span class="title">
                标签
            </span>
            <span class="count">
                16
            </span>
        </a>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                    <aside id="krw-toc" class="widget widget-kratos-toc clearfix toc-div-class" >
    <div class="photo-background"></div>
    <h4 class="widget-title no-after">
        <i class="fa fa-compass"></i>
        文章目录
        <span class="toc-progress-bar" role="progressbar" aria-label="阅读进度："></span>
    </h4>
    <div class="textwidget">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#emsp"><span class="toc-text"> 
</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86MMD%E6%96%87%E4%BB%B6"><span class="toc-text">处理MMD文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0"><span class="toc-text">更新</span></a></li></ol></li></ol>
    </div>
</aside>
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分类目录</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">学习记录</a><span class="category-list-count">95</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/">开发记录</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%99%E7%A8%8B%E6%96%87%E6%A1%A3/">教程文档</a><span class="category-list-count">4</span></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>标签聚合</h4>
      <div class="tag-clouds">
        <a href="/tags/Compute-Shader/" style="font-size: 0.62em;">Compute Shader</a> <a href="/tags/Dots/" style="font-size: 0.67em;">Dots</a> <a href="/tags/Java/" style="font-size: 0.64em;">Java</a> <a href="/tags/Minecraft/" style="font-size: 0.6em;">Minecraft</a> <a href="/tags/Shader/" style="font-size: 0.76em;">Shader</a> <a href="/tags/TwilightMelody/" style="font-size: 0.64em;">TwilightMelody</a> <a href="/tags/UI/" style="font-size: 0.71em;">UI</a> <a href="/tags/Unity/" style="font-size: 0.8em;">Unity</a> <a href="/tags/Unity%E7%BC%96%E8%BE%91%E5%99%A8%E6%8B%93%E5%B1%95/" style="font-size: 0.6em;">Unity编辑器拓展</a> <a href="/tags/%E5%8A%A8%E6%95%88/" style="font-size: 0.69em;">动效</a> <a href="/tags/%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/" style="font-size: 0.65em;">底层原理</a> <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 0.75em;">性能优化</a> <a href="/tags/%E6%95%B0%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 0.73em;">数学可视化</a> <a href="/tags/%E6%96%87%E6%A1%A3/" style="font-size: 0.65em;">文档</a> <a href="/tags/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 0.67em;">算法与数据结构</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6/" style="font-size: 0.78em;">计算机图形学</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2025/07/25/ComputeShader-MagicLibrary/"><i class="fa  fa-book"></i> 浅尝ComputeShader-魔法图书馆</a>
            
          
        
          
          
            <a class="list-group-item" href="/2025/06/23/MyUIProject-09/"><i class="fa  fa-book"></i> UI动效 09</a>
            
          
        
          
          
            <a class="list-group-item" href="/2025/06/12/SourceCode-M3/"><i class="fa  fa-book"></i> 源码-魔法金属伤害计算</a>
            
          
        
          
          
            <a class="list-group-item" href="/2025/05/19/TwilightMelody-2-2025-05-01/"><i class="fa  fa-book"></i> TwilightMelody-2-2025-05-01</a>
            
          
        
          
          
            <a class="list-group-item" href="/2025/03/17/ComputeShaderLearning-1/"><i class="fa  fa-book"></i> GPU粒子实现原理与ComputeShader GPU Instance的基础应用</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  class="ap-lrc"  >
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        <!-- Keep for compatibility -->
                        
                        <li><a href="mailto:ccc895286662@gmail.com"><i class="fa fa-envelope"></i></a></li>
                        
                        
                        
                        
                        
                        <li><a target="_blank" rel="nofollow" href="https://github.com/unishiki"><i class="fa fa-github"></i></a></li>
                        
                        <!-- New links -->
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2025 uni_shiki 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by uni_shiki.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
                    <div class="box theme-box" id="snow-switch">
                        <span class="fa fa-snowflake-o"></span>
                    </div>
                
                
                    <div class="box group-box">
                        <a href="https://jq.qq.com/?_wv=1027&k=CpdI35JY" target="_blank" rel="nofollow">
                            <span class="fa fa-users"></span>
                        </a>
                    </div>
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="/vendors/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="/vendors/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>

    <div>
        <canvas id="snow"></canvas>
        <script async src="/js/snow.min.js"></script>
    </div>


    <script async src="/js/candy.min.js"></script>



    <script defer src="/vendors/aplayer@1.10.1/dist/APlayer.min.js"></script>
    
    <script defer src="/vendors/meting@2.0.1/dist/Meting.min.js"></script>
    <meting-js
        server="netease"
        type="playlist"
        id="3080117718"
        order="random"
        fixed="true"
    >
    </meting-js>



    <script defer src="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>